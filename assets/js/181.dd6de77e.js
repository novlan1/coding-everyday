(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{451:function(t,s,a){"use strict";a.r(s);var e=a(14),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("ul",[s("li",[s("a",{attrs:{href:"#1-webpack-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"}},[t._v("1. webpack 配置文件")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#11-webpackconfigjs"}},[t._v("1.1. webpack.config.js")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#12-mode"}},[t._v("1.2. mode")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#13-%E5%A4%9A%E5%85%A5%E5%8F%A3"}},[t._v("1.3. 多入口")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#14-%E4%B8%BA%E6%89%93%E5%8C%85%E5%87%BA%E7%9A%84-js-%E5%8A%A0%E5%89%8D%E7%BC%80"}},[t._v("1.4. 为打包出的 JS 加前缀")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#15-devtool"}},[t._v("1.5. devtool")])])])])]),t._v(" "),s("h2",{attrs:{id:"_1-webpack-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-webpack-配置文件"}},[t._v("#")]),t._v(" 1. webpack 配置文件")]),t._v(" "),s("h3",{attrs:{id:"_1-1-webpack-config-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-webpack-config-js"}},[t._v("#")]),t._v(" 1.1. webpack.config.js")]),t._v(" "),s("p",[t._v("webpack.config.js 是 webpack 的默认打包配置文件。也可以"),s("code",[t._v("npx webpack --config 配置文件名")]),t._v("手动设置")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Wepack配置接口\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包模式")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"production"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./index.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 出口")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bundle.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// path 后必须是一个绝对位置")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bundle"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("其中"),s("code",[t._v('entry: "./index.js"')]),t._v("是一个简写，")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./index.js"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-2-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-mode"}},[t._v("#")]),t._v(" 1.2. mode")]),t._v(" "),s("p",[t._v("打包模式，有生产环境与发布环境两种，默认是发布环境。")]),t._v(" "),s("ul",[s("li",[t._v("production\n"),s("ul",[s("li",[t._v("代码被压缩为一行")])])]),t._v(" "),s("li",[t._v("development\n"),s("ul",[s("li",[t._v("代码不被压缩")])])])]),t._v(" "),s("p",[t._v("当没有显示制定时会输出下面内容：")]),t._v(" "),s("blockquote",[s("p",[t._v("WARNING in configuration")]),t._v(" "),s("p",[t._v("The 'mode' option has not been set, webpack will fallback to 'production' for this value. Set 'mode' option to 'development' or 'production' to enable defaults for each environment. You can also set it to 'none' to disable any default behavior. Learn more: "),s("code",[t._v("https://webpack.js.org/configuration/mode/")])])]),t._v(" "),s("h3",{attrs:{id:"_1-3-多入口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-多入口"}},[t._v("#")]),t._v(" 1.3. 多入口")]),t._v(" "),s("p",[t._v("最后都会将其写入到 html 的 script 标签中")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a/index.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sub")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'b/main.js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 多个入口是不可打包为同一个JS的，")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-4-为打包出的-js-加前缀"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-为打包出的-js-加前缀"}},[t._v("#")]),t._v(" 1.4. 为打包出的 JS 加前缀")]),t._v(" "),s("p",[t._v("比如静态资源都放在 CDN 上，那么希望打包出 srcipt 的 src 是一个 http 地址 可这样做：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("publicPath")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://cdn.cn'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-5-devtool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-devtool"}},[t._v("#")]),t._v(" 1.5. devtool")]),t._v(" "),s("p",[t._v("devtool 就是去配置 sourcemap，方便调试，能准确定位到代码错误")]),t._v(" "),s("ul",[s("li",[t._v("cheap\n"),s("ul",[s("li",[t._v("定位到行，不定位到列（提示性能）")])])]),t._v(" "),s("li",[t._v("module\n"),s("ul",[s("li",[t._v("把依赖模块中的代码一并做映射")])])]),t._v(" "),s("li",[t._v("eval\n"),s("ul",[s("li",[t._v("使用 eval 形式做 sourcemap 映射")])])]),t._v(" "),s("li",[t._v("inline\n"),s("ul",[s("li",[t._v("行内的映射关系")])])])]),t._v(" "),s("p",[t._v("最好的配置：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发时")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devtool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cheap-module-eval-source-map'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 线上环境：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devtool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cheap-module-source-map'")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);