(window.webpackJsonp=window.webpackJsonp||[]).push([[339],{619:function(t,a,s){"use strict";s.r(a);var e=s(14),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("ul",[a("li",[a("a",{attrs:{href:"#1-%E7%AC%AC%E4%B8%80%E5%91%A8"}},[t._v("1. 第一周")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#11-js-%E4%BF%AE%E6%94%B9useragent%E7%9A%84%E6%96%B9%E5%BC%8F"}},[t._v("1.1. js 修改userAgent的方式：")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#12-jest%E4%BF%AE%E6%94%B9locationsearch%E6%8A%A5%E9%94%99-not-implemented-navigation-except-hash-changes"}},[t._v("1.2. jest修改location.search报错 ：Not implemented: navigation (except hash changes)")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#13-%E5%A6%82%E4%BD%95%E6%A8%A1%E6%8B%9Fsettimeoutsetinterval%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E9%98%B2%E6%8A%96"}},[t._v("1.3. 如何模拟setTimeout/setInterval，如何测试防抖？")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#14-%E5%A6%82%E4%BD%95%E6%A8%A1%E6%8B%9Fscript%E5%92%8Cimage%E7%9A%84onloadonerroronreadystatechange%E7%AD%89%E6%96%B9%E6%B3%95"}},[t._v("1.4. 如何模拟script和image的onload、onerror、onreadystatechange等方法")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#15-%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A5xei%E5%88%86%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D"}},[t._v("1.5. 测试报告5x、E、I分别是什么意思？")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#2-%E7%AC%AC%E4%BA%8C%E5%91%A8"}},[t._v("2. 第二周")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#21-%E5%A6%82%E4%BD%95%E6%B5%8B%E8%AF%95%E6%89%8B%E6%9C%BA%E6%91%87%E5%8A%A8%E4%BA%8B%E4%BB%B6"}},[t._v("2.1. 如何测试手机摇动事件？")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#22-mock%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9D%97%E5%92%8C%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9"}},[t._v("2.2. mock用户模块和第三方模块的注意点")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#23-comm%E5%BA%93mock%E4%BA%86axios%E4%B8%9A%E5%8A%A1%E5%BA%93%E6%89%A7%E8%A1%8C%E5%8D%95%E6%B5%8B%E6%97%B6%E5%A6%82%E6%9E%9C%E6%9C%89%E4%B8%9A%E5%8A%A1%E5%BA%93a%E6%96%87%E4%BB%B6%E5%BC%95%E7%94%A8%E4%BA%86comm%E5%BA%93%E7%9A%84b%E6%96%87%E4%BB%B6%E8%80%8Cb%E6%96%87%E4%BB%B6%E5%8F%88%E5%BC%95%E7%94%A8%E4%BA%86axios%E5%B0%B1%E4%BC%9A%E8%87%AA%E5%8A%A8%E4%BD%BF%E7%94%A8comm%E5%BA%93%E7%9A%84mock%E7%9A%84axios%E4%B8%94%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF%E6%9C%89%E8%AF%AF%E5%AF%BC%E4%B8%8D%E6%98%93%E6%8E%92%E6%9F%A5"}},[t._v("2.3. comm库mock了axios，业务库执行单测时，如果有业务库A文件引用了comm库的B文件，而B文件又引用了axios，就会自动使用comm库的mock的axios，且报错信息有误导，不易排查")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#24-vuex%E5%8F%AA%E6%9C%89%E5%8A%A0%E4%B8%8Anamespacedtrue%E5%90%8E%E6%89%8D%E8%83%BD%E7%94%A8logingetlogininfo%E8%BF%99%E7%A7%8D%E5%BD%A2%E5%BC%8F"}},[t._v("2.4. vuex只有加上namespaced：true后，才能用login/getLoginInfo这种形式")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#25-%E5%A6%82%E4%BD%95%E6%89%8B%E5%8A%A8%E8%A7%A6%E5%8F%91%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%A6%82cilcktouchmove%E7%AD%89-"}},[t._v("2.5. 如何手动触发浏览器的事件，如cilck、touchmove等 ？")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#26-objectdefineproperty%E5%A6%82%E4%BD%95%E5%AE%9A%E4%B9%89%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E6%AF%94%E5%A6%82locationhref%E5%8A%AB%E6%8C%81set"}},[t._v("2.6. Object.defineProperty如何定义嵌套结构，比如location.href劫持set")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#3-%E7%AC%AC%E4%B8%89%E5%91%A8"}},[t._v("3. 第三周")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#31-vue-test-utils%E7%9A%84setdata%E4%B8%8D%E4%BC%9A%E6%94%B9%E5%8F%98%E5%BC%95%E7%94%A8%E5%9C%B0%E5%9D%80"}},[t._v("3.1. vue-test-utils的setData不会改变引用地址")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#32-%E6%B5%8B%E8%AF%95logic%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"}},[t._v("3.2. 测试logic的最佳实践")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#33-%E6%B5%8B%E8%AF%95%E5%87%BD%E6%95%B0%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"}},[t._v("3.3 测试函数抛出异常")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#34-toequal%E5%8F%AF%E4%BB%A5%E5%AF%B9%E6%AF%94%E5%AF%B9%E8%B1%A1-%E6%95%B0%E7%BB%84-tobe%E4%B8%8D%E5%8F%AF%E4%BB%A5%E4%B8%80%E8%88%AC%E6%B5%8B%E8%AF%95%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%87%A0%E4%B8%AA%E5%B1%9E%E6%80%A7%E7%9A%84%E8%AF%9D%E5%8F%AF%E4%BB%A5%E7%94%A8tomatchobject"}},[t._v("3.4 toEqual可以对比对象 数组, toBe不可以，一般测试对象的几个属性的话，可以用toMatchObject")])])])])]),t._v(" "),a("h2",{attrs:{id:"jest工作笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jest工作笔记"}},[t._v("#")]),t._v(" Jest工作笔记 ")]),t._v(" "),a("h3",{attrs:{id:"_1-第一周"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-第一周"}},[t._v("#")]),t._v(" 1. 第一周")]),t._v(" "),a("h4",{attrs:{id:"_1-1-js-修改useragent的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-js-修改useragent的方式"}},[t._v("#")]),t._v(" 1.1. js 修改userAgent的方式：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userAgent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不管用")]),t._v("\nObject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("userAgent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 报错，不可redefine")]),t._v("\n")])])]),a("p",[t._v("方法：Object.defineProperty()")]),t._v(" "),a("h4",{attrs:{id:"_1-2-jest修改location-search报错-not-implemented-navigation-except-hash-changes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-jest修改location-search报错-not-implemented-navigation-except-hash-changes"}},[t._v("#")]),t._v(" 1.2. jest修改location.search报错 ：Not implemented: navigation (except hash changes)")]),t._v(" "),a("p",[t._v("应该同样采用"),a("code",[t._v("Object.defineProperty")]),t._v("的方式，同理，修改document也用劫持方式。\n但可以直接修改hash，即"),a("code",[t._v("window.location.hash = ''")])]),t._v(" "),a("h4",{attrs:{id:"_1-3-如何模拟settimeout-setinterval-如何测试防抖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-如何模拟settimeout-setinterval-如何测试防抖"}},[t._v("#")]),t._v(" 1.3. 如何模拟setTimeout/setInterval，如何测试防抖？")]),t._v(" "),a("p",[t._v("相关API："),a("code",[t._v("jest.useFakeTimer();  jest.runAllTimers();  jest.useRealTimers();")]),t._v("\n还有"),a("code",[t._v("sinon.useFakeTimer().tick()")]),t._v("方式等模拟时间流逝")]),t._v(" "),a("h4",{attrs:{id:"_1-4-如何模拟script和image的onload、onerror、onreadystatechange等方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-如何模拟script和image的onload、onerror、onreadystatechange等方法"}},[t._v("#")]),t._v(" 1.4. 如何模拟script和image的onload、onerror、onreadystatechange等方法")]),t._v(" "),a("p",[t._v("还是用"),a("code",[t._v("Obejct.defineProperty")]),t._v("的方式，操作对象不同：image是 "),a("code",[t._v("Image.prototype，script")]),t._v("是 "),a("code",[t._v("HTMLScriptElement.prototype")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"_1-5-测试报告5x、e、i分别是什么意思"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-测试报告5x、e、i分别是什么意思"}},[t._v("#")]),t._v(" 1.5. 测试报告5x、E、I分别是什么意思？")]),t._v(" "),a("ul",[a("li",[t._v("5x表示在测试中这条语句执行了 5 次；")]),t._v(" "),a("li",[t._v("E是测试用例没有测试if条件为false时的情况("),a("code",[t._v("else path not taken")]),t._v(")；")]),t._v(" "),a("li",[t._v("I是测试用例没有测试if条件为true时的情况("),a("code",[t._v("if path not taken")]),t._v(")；")])]),t._v(" "),a("h3",{attrs:{id:"_2-第二周"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-第二周"}},[t._v("#")]),t._v(" 2. 第二周")]),t._v(" "),a("h4",{attrs:{id:"_2-1-如何测试手机摇动事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-如何测试手机摇动事件"}},[t._v("#")]),t._v(" 2.1. 如何测试手机摇动事件？")]),t._v(" "),a("p",[t._v("方法：用"),a("code",[t._v("eventEmitter")]),t._v("的on事件劫持"),a("code",[t._v("window.addEventListener")]),t._v("，而从可以通过event.emit事件来手动触发")]),t._v(" "),a("h4",{attrs:{id:"_2-2-mock用户模块和第三方模块的注意点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-mock用户模块和第三方模块的注意点"}},[t._v("#")]),t._v(" 2.2. mock用户模块和第三方模块的注意点")]),t._v(" "),a("p",[t._v("(1) mock用户模块，需要指定，比如"),a("code",[t._v("jest.mock('utils/loader')")]),t._v("；\n(2) mock第三方也就是node_modules模块，不需要指定，只需要在node_modules同级目录下新建__mocks__文件夹，包含要mock的模块，比如"),a("code",[t._v("axios/vant")])]),t._v(" "),a("h4",{attrs:{id:"_2-3-comm库mock了axios-业务库执行单测时-如果有业务库a文件引用了comm库的b文件-而b文件又引用了axios-就会自动使用comm库的mock的axios-且报错信息有误导-不易排查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-comm库mock了axios-业务库执行单测时-如果有业务库a文件引用了comm库的b文件-而b文件又引用了axios-就会自动使用comm库的mock的axios-且报错信息有误导-不易排查"}},[t._v("#")]),t._v(" 2.3. comm库mock了axios，业务库执行单测时，如果有业务库A文件引用了comm库的B文件，而B文件又引用了axios，就会自动使用comm库的mock的axios，且报错信息有误导，不易排查")]),t._v(" "),a("p",[t._v("方法：业务库的单测中，要手动解除mock，即"),a("code",[t._v("jest.unmock('axios')")])]),t._v(" "),a("h4",{attrs:{id:"_2-4-vuex只有加上namespaced-true后-才能用login-getlogininfo这种形式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-vuex只有加上namespaced-true后-才能用login-getlogininfo这种形式"}},[t._v("#")]),t._v(" 2.4. vuex只有加上namespaced：true后，才能用login/getLoginInfo这种形式")]),t._v(" "),a("h4",{attrs:{id:"_2-5-如何手动触发浏览器的事件-如cilck、touchmove等"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-如何手动触发浏览器的事件-如cilck、touchmove等"}},[t._v("#")]),t._v(" 2.5. 如何手动触发浏览器的事件，如cilck、touchmove等 ？")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" evObj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Events'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nevObj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nokBtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatchEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("evObj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"_2-6-object-defineproperty如何定义嵌套结构-比如location-href劫持set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-object-defineproperty如何定义嵌套结构-比如location-href劫持set"}},[t._v("#")]),t._v(" 2.6. Object.defineProperty如何定义嵌套结构，比如location.href劫持set")]),t._v(" "),a("ol",[a("li",[t._v("先定义location => "),a("code",[t._v("Object.defineProperty(window, location, {})")])]),t._v(" "),a("li",[t._v("再定义location.href => "),a("code",[t._v("Object.defineProperty(location, href, {})")])])]),t._v(" "),a("h3",{attrs:{id:"_3-第三周"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-第三周"}},[t._v("#")]),t._v(" 3. 第三周")]),t._v(" "),a("h4",{attrs:{id:"_3-1-vue-test-utils的setdata不会改变引用地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-vue-test-utils的setdata不会改变引用地址"}},[t._v("#")]),t._v(" 3.1. vue-test-utils的setData不会改变引用地址")]),t._v(" "),a("p",[t._v("如果组件内两个变量已经指向了同一地址，setData的方式无法让其不相等，可以用"),a("code",[t._v("wrapper.vm.tempSelectRole = {}")]),t._v("改变值")]),t._v(" "),a("h4",{attrs:{id:"_3-2-测试logic的最佳实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-测试logic的最佳实践"}},[t._v("#")]),t._v(" 3.2. 测试logic的最佳实践")]),t._v(" "),a("p",[t._v("要测试对某接口不同返回结果的处理，mock的网络框架，不要放在__mocks__中，因为接口过多，会让这个文件爆炸，难以维护。")]),t._v(" "),a("p",[t._v("可以采用"),a("code",[t._v("jest.mock('logic/api/post',() => ({}))")]),t._v("的方式进行动态模拟，把需要模拟的接口返回值、url、times放到一个map中，根据调用次数返回不同结果。")]),t._v(" "),a("p",[t._v("好处是：")]),t._v(" "),a("ol",[a("li",[t._v("数据据和逻辑分离，容易维护")]),t._v(" "),a("li",[t._v("可以抽取、封装公用逻辑")])]),t._v(" "),a("p",[t._v("思路来源于官网API（代码如下），但是此例无法根据参数判断")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myMockFn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jest\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mockReturnValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mockReturnValueOnce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first call'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mockReturnValueOnce")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'second call'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'first call', 'second call', 'default', 'default'")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myMockFn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myMockFn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myMockFn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myMockFn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3-3-测试函数抛出异常"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-测试函数抛出异常"}},[t._v("#")]),t._v(" 3.3 测试函数抛出异常")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'throws on octopus'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drinkFlavor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'octopus'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toThrow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3-4-toequal可以对比对象-数组-tobe不可以-一般测试对象的几个属性的话-可以用tomatchobject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-toequal可以对比对象-数组-tobe不可以-一般测试对象的几个属性的话-可以用tomatchobject"}},[t._v("#")]),t._v(" 3.4 toEqual可以对比对象 数组, toBe不可以，一般测试对象的几个属性的话，可以用toMatchObject")]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://www.it1352.com/1068940.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("去抖动功能的Jest单元测试(Jest unit test for a debounce function)"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.it1352.com/1472892.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("你如何使用Jest来测试img.onerror(How do you use Jest to test img.onerror)"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/jiangxiaobo/p/5830200.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS中手动触发事件的方法"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);