(window.webpackJsonp=window.webpackJsonp||[]).push([[302],{576:function(v,_,e){"use strict";e.r(_);var s=e(14),a=Object(s.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("ul",[_("li",[_("a",{attrs:{href:"#1---save-%E5%92%8C---save-dev-%E7%9A%84%E5%8C%BA%E5%88%AB"}},[v._v("1. "),_("code",[v._v("--save")]),v._v(" 和 "),_("code",[v._v("--save-dev")]),v._v(" 的区别")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#2-%E5%85%B3%E4%BA%8Ecnpm"}},[v._v("2. 关于"),_("code",[v._v("cnpm")])])]),v._v(" "),_("li",[_("a",{attrs:{href:"#3-cnpm%E5%92%8Cnpm%E7%9A%84%E5%8C%BA%E5%88%AB"}},[v._v("3. "),_("code",[v._v("cnpm")]),v._v("和"),_("code",[v._v("npm")]),v._v("的区别")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#4-%E8%AE%BE%E7%BD%AE-npm-%E7%9A%84-registry-%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95"}},[v._v("4. 设置 npm 的 registry 的几种方法")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#5-prepacknpm-run-build%E7%9A%84%E4%BD%9C%E7%94%A8"}},[v._v("5. "),_("code",[v._v('prepack：“npm run build"')]),v._v("的作用")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#6-package-lockjson%E7%9A%84%E4%BD%9C%E7%94%A8"}},[v._v("6. "),_("code",[v._v("package-lock.json")]),v._v("的作用")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#7-%E7%89%88%E6%9C%AC%E5%8F%B7"}},[v._v("7. 版本号")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#8-npx%E5%B8%B8%E8%A7%81%E7%94%A8%E5%A4%84"}},[v._v("8. npx常见用处")])]),v._v(" "),_("li",[_("a",{attrs:{href:"#9-npx%E4%BD%9C%E7%94%A8"}},[v._v("9. npx作用")]),v._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"#91-npm-run%E7%9A%84%E8%BF%87%E7%A8%8B"}},[v._v("9.1. "),_("code",[v._v("npm run")]),v._v("的过程")])])])]),v._v(" "),_("li",[_("a",{attrs:{href:"#10-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86npm-warn-checkpermissions-missing-write-access-to-usrlocallibnode_modules"}},[v._v("10. 【错误处理】"),_("code",[v._v("npm WARN checkPermissions Missing write access to /usr/local/lib/node_modules")])])])]),v._v(" "),_("h3",{attrs:{id:"_1-save-和-save-dev-的区别"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-save-和-save-dev-的区别"}},[v._v("#")]),v._v(" 1. "),_("code",[v._v("--save")]),v._v(" 和 "),_("code",[v._v("--save-dev")]),v._v(" 的区别")]),v._v(" "),_("p",[v._v("以"),_("code",[v._v("msbuild")]),v._v("包为例")]),v._v(" "),_("ol",[_("li",[_("code",[v._v("npm install --save")])])]),v._v(" "),_("ul",[_("li",[v._v("会把"),_("code",[v._v("msbuild")]),v._v("包安装到"),_("code",[v._v("node_modules")]),v._v("目录中")]),v._v(" "),_("li",[v._v("会在"),_("code",[v._v("package.json")]),v._v("的"),_("code",[v._v("dependencies")]),v._v("属性下添加"),_("code",[v._v("msbuild")])]),v._v(" "),_("li",[v._v("之后运行"),_("code",[v._v("npm install")]),v._v("命令时，会自动安装"),_("code",[v._v("msbuild")]),v._v("到"),_("code",[v._v("node_modules")]),v._v("目录中")]),v._v(" "),_("li",[v._v("之后运行"),_("code",[v._v("npm install --production")]),v._v("或者注明"),_("code",[v._v("NODE_ENV")]),v._v("变量值为"),_("code",[v._v("production")]),v._v("时，会自动安装"),_("code",[v._v("msbuild")]),v._v("到"),_("code",[v._v("node_modules")]),v._v("目录中")])]),v._v(" "),_("ol",{attrs:{start:"2"}},[_("li",[_("code",[v._v("npm install --save-dev")])])]),v._v(" "),_("ul",[_("li",[v._v("会把"),_("code",[v._v("msbuild")]),v._v("包安装到"),_("code",[v._v("node_modules")]),v._v("目录中")]),v._v(" "),_("li",[v._v("会在"),_("code",[v._v("package.json")]),v._v("的"),_("code",[v._v("devDependencies")]),v._v("属性下添加"),_("code",[v._v("msbuild")])]),v._v(" "),_("li",[v._v("之后运行"),_("code",[v._v("npm install")]),v._v("命令时，会自动安装"),_("code",[v._v("msbuild")]),v._v("到"),_("code",[v._v("node_modules")]),v._v("目录中")]),v._v(" "),_("li",[v._v("之后运行"),_("code",[v._v("npm install --production")]),v._v("或者注明NODE_ENV变量值为"),_("code",[v._v("production")]),v._v("时，"),_("strong",[v._v("不会")]),v._v("自动安装"),_("code",[v._v("msbuild")]),v._v("到"),_("code",[v._v("node_modules")]),v._v("目录中")])]),v._v(" "),_("p",[_("code",[v._v("--save")]),v._v("和"),_("code",[v._v("--save-dev")]),v._v("的区别在于，"),_("code",[v._v("--save")]),v._v("安装的包，会被"),_("strong",[v._v("引入到我们最终输入的代码中")]),v._v("，也就是最终会在用户浏览器执行的包，比如（"),_("strong",[_("code",[v._v("jquery")])]),v._v("，"),_("strong",[_("code",[v._v("vue")])]),v._v("）。 "),_("code",[v._v("--save-dev")]),v._v("安装的包"),_("strong",[v._v("只会在开发者的开发环境上执行")]),v._v("，用于协助开发者的开发的，比如("),_("strong",[_("code",[v._v("webpack")]),v._v("，"),_("code",[v._v("babel")])]),v._v(")。")]),v._v(" "),_("h3",{attrs:{id:"_2-关于cnpm"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-关于cnpm"}},[v._v("#")]),v._v(" 2. 关于"),_("code",[v._v("cnpm")])]),v._v(" "),_("p",[v._v("因为"),_("code",[v._v("npm")]),v._v("安装插件是从国外服务器下载，受网络影响大，可能出现异常，如果"),_("code",[v._v("npm")]),v._v("的服务器在中国就好了，所以我们乐于分享的淘宝团队干了这事。来自官网：“这是一个完整"),_("code",[v._v("npmjs.org")]),v._v("镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步。”")]),v._v(" "),_("ul",[_("li",[v._v("官方网址："),_("code",[v._v("http://npm.taobao.org")])]),v._v(" "),_("li",[v._v("安装：命令提示符执行"),_("code",[v._v("npm install cnpm -g –registry=https://registry.npm.taobao.org")])]),v._v(" "),_("li",[v._v("注意：安装完后最好查看其版本号"),_("code",[v._v("cnpm -v")]),v._v("或关闭命令提示符重新打开，安装完直接使用有可能会出现错误")])]),v._v(" "),_("p",[v._v("注："),_("code",[v._v("cnpm")]),v._v("跟"),_("code",[v._v("npm")]),v._v("用法完全一致，只是在执行命令时将"),_("code",[v._v("npm")]),v._v("改为"),_("code",[v._v("cnpm")]),v._v("。")]),v._v(" "),_("h3",{attrs:{id:"_3-cnpm和npm的区别"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-cnpm和npm的区别"}},[v._v("#")]),v._v(" 3. "),_("code",[v._v("cnpm")]),v._v("和"),_("code",[v._v("npm")]),v._v("的区别")]),v._v(" "),_("ul",[_("li",[v._v("cnpm是扁平化结构，把依赖都展开")]),v._v(" "),_("li",[v._v("npm是树形结构，一层一层。")]),v._v(" "),_("li",[v._v("打包时cnpm慢")])]),v._v(" "),_("h3",{attrs:{id:"_4-设置-npm-的-registry-的几种方法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-设置-npm-的-registry-的几种方法"}},[v._v("#")]),v._v(" 4. 设置 npm 的 registry 的几种方法")]),v._v(" "),_("ol",[_("li",[v._v("临时使用")])]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("npm --registry https://registry.npm.taobao.org install express\n")])])]),_("ol",{attrs:{start:"2"}},[_("li",[v._v("持久使用")])]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("npm config set registry https://registry.npm.taobao.org\n")])])]),_("p",[v._v("配置后可通过下面方式来验证是否成功")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("npm config get registry 或  npm info express\n")])])]),_("ol",{attrs:{start:"3"}},[_("li",[v._v("通过cnpm使用")])]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("npm install -g cnpm --registry=https://registry.npm.taobao.org\n")])])]),_("h3",{attrs:{id:"_5-prepack-npm-run-build-的作用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-prepack-npm-run-build-的作用"}},[v._v("#")]),v._v(" 5. "),_("code",[v._v('prepack：“npm run build"')]),v._v("的作用")]),v._v(" "),_("p",[_("code",[v._v("package.json")]),v._v("中的命令，加上"),_("code",[v._v("pre")]),v._v("就可以在该条命令前执行，比如"),_("code",[v._v('prepack：“npm run build"')]),v._v("。同理，加上"),_("code",[v._v("post")]),v._v("就可以在该条命令之后执行。")]),v._v(" "),_("h3",{attrs:{id:"_6-package-lock-json的作用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-package-lock-json的作用"}},[v._v("#")]),v._v(" 6. "),_("code",[v._v("package-lock.json")]),v._v("的作用")]),v._v(" "),_("p",[_("code",[v._v("package-lock")]),v._v("就是"),_("strong",[v._v("锁定安装时的包版本号")]),v._v("，需要上传到"),_("code",[v._v("git")]),v._v("上，以保证其他人在"),_("code",[v._v("install")]),v._v("时候，大家的依赖版本相同。")]),v._v(" "),_("p",[v._v("它和"),_("code",[v._v("package.json")]),v._v("的区别在于（举个栗子）：")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v('"dependencies": {\n  "@types/node": "^8.0.33",\n}\n')])])]),_("p",[v._v("这里的"),_("code",[v._v("^")]),v._v("向上尖号是定义"),_("strong",[v._v("向后（新）兼容依赖")]),v._v("，如果"),_("code",[v._v("types/node")]),v._v("版本是超过"),_("code",[v._v("8.0.33")]),v._v("，并且是在"),_("strong",[v._v("大版本（8）上相同")]),v._v("，就允许下载最新的"),_("code",[v._v("types/node")]),v._v("包。同一个大版本不同版本号之间存在差异，导致依赖库包行为特征有时候不兼容。")]),v._v(" "),_("p",[_("code",[v._v("package.json")]),v._v("文件"),_("strong",[v._v("只能锁定大版本")]),v._v("，"),_("strong",[v._v("即版本号的第一位")]),v._v("，不能锁定后面的小版本，你每次"),_("code",[v._v("npm install")]),v._v("时候拉取的该大版本下面最新的版本，可能有些人之前就踩过类似的坑。")]),v._v(" "),_("p",[_("code",[v._v("package-lock.json")]),v._v("就是来解决包锁定不升级问题的。")]),v._v(" "),_("p",[v._v("如果要升级"),_("code",[v._v("package-lock.json")]),v._v("里面的库包，怎么操作呢？")]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("npm install XXX@x.x.x \n")])])]),_("p",[v._v("注意：\n"),_("code",[v._v("cnpm install")]),v._v("的时候，就算你项目中有"),_("code",[v._v("package-lock.json")]),v._v("文件，"),_("code",[v._v("cnpm")]),v._v("也不会识别，仍会根据"),_("code",[v._v("package.json")]),v._v("来安装。")]),v._v(" "),_("h3",{attrs:{id:"_7-版本号"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_7-版本号"}},[v._v("#")]),v._v(" 7. 版本号")]),v._v(" "),_("p",[v._v("使用 npm 下载和发布代码时都会接触到版本号。npm 使用语义版本号来管理代码，语义版本号分为 X.Y.Z 三位，分别代表主版本号、次版本号和补丁版本号。当代码变更时，版本号按以下原则更新。")]),v._v(" "),_("ul",[_("li",[v._v("如果只是修复bug，需要更新Z位。")]),v._v(" "),_("li",[v._v("如果是新增了功能，但是向下兼容，需要更新Y位。")]),v._v(" "),_("li",[v._v("如果有大变动，向下不兼容，需要更新X位。")])]),v._v(" "),_("blockquote",[_("p",[v._v("版本号中的“~” 和 “^”")]),v._v(" "),_("ul",[_("li",[v._v("~1.2.2：表示安装1.2.x的最新版本（不低于1.2.2），但是不安装1.3.x，也就是说安装时不改变主版本号和次版本号。")]),v._v(" "),_("li",[v._v("ˆ1.2.2：表示安装1.x.x的最新版本（不低于1.2.2），但是不安装2.x.x，也就是说安装时不改变主版本号。需要注意的是，如果主版本号为0，则 “^” 和 “~” 行为相同，这是因为此时处于开发阶段，即使是次版本号变动，也可能带来程序的不兼容。")]),v._v(" "),_("li",[v._v("1.2.2：表示安装1.2.2版本，使用 npm update 命令时不会更新此类包")])])]),v._v(" "),_("h3",{attrs:{id:"_8-npx常见用处"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_8-npx常见用处"}},[v._v("#")]),v._v(" 8. npx常见用处")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("调用项目内部安装的模块\n"),_("code",[v._v("npx")]),v._v(" 的原理很简单，就是运行的时候，会到"),_("code",[v._v("node_modules/.bin")]),v._v("路径和环境变量"),_("code",[v._v("$PATH")]),v._v("里面，检查命令是否存在。")])]),v._v(" "),_("li",[_("p",[v._v("避免全局安装模块\n比如，"),_("code",[v._v("create-react-app")]),v._v("这个模块是全局安装，"),_("code",[v._v("npx")]),v._v(" 可以运行它，而且不进行全局安装。")])])]),v._v(" "),_("h3",{attrs:{id:"_9-npx作用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_9-npx作用"}},[v._v("#")]),v._v(" 9. npx作用")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("避免全局安装模块")]),v._v(" "),_("ul",[_("li",[v._v("将create-react-app下载到临时目录，使用以后再删除。所以每一次执行"),_("code",[v._v("npx create-react-app")]),v._v("都会重新下载"),_("code",[v._v("create-react-app")]),v._v("。")])])]),v._v(" "),_("li",[_("p",[v._v("调用项目内部安装的模块")]),v._v(" "),_("ul",[_("li",[v._v("比如安装了"),_("code",[v._v("mocha")]),v._v("，不可以在命令行中直接输入"),_("code",[v._v("mocha")]),v._v("，但是可以在"),_("code",[v._v("package.json")]),v._v("中新建"),_("code",[v._v("script")]),v._v("，比如："),_("code",[v._v("test: mocha --version")]),v._v("。")]),v._v(" "),_("li",[v._v("若使用"),_("code",[v._v("npx")]),v._v("，就可以使用"),_("code",[v._v("mocha")]),v._v("命令了，如"),_("code",[v._v("npx mocha --version")]),v._v("。")])])])]),v._v(" "),_("h4",{attrs:{id:"_9-1-npm-run的过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-npm-run的过程"}},[v._v("#")]),v._v(" 9.1. "),_("code",[v._v("npm run")]),v._v("的过程")]),v._v(" "),_("p",[v._v("每次"),_("code",[v._v("npm run")]),v._v("的时候都会新建一个"),_("code",[v._v("shell")]),v._v("，在"),_("code",[v._v("shell")]),v._v("中执行指定的脚本命令。"),_("code",[v._v("shell")]),v._v("会将"),_("code",[v._v("node_modules/bin")]),v._v("子目录加入"),_("code",[v._v("path")]),v._v("变量，执行结束后，再将"),_("code",[v._v("path")]),v._v("变量恢复原样。这样就可以调用内部的命令了。")]),v._v(" "),_("h3",{attrs:{id:"_10-【错误处理】npm-warn-checkpermissions-missing-write-access-to-usr-local-lib-node-modules"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_10-【错误处理】npm-warn-checkpermissions-missing-write-access-to-usr-local-lib-node-modules"}},[v._v("#")]),v._v(" 10. 【错误处理】"),_("code",[v._v("npm WARN checkPermissions Missing write access to /usr/local/lib/node_modules")])]),v._v(" "),_("p",[v._v("这个问题的出现并不是管理员权限的问题，而是之前安装失败了，这个文件已经存在了，再次安装无法覆盖写入的问题。")]),v._v(" "),_("ol",[_("li",[v._v("用"),_("code",[v._v("cnpm")]),v._v("试试")]),v._v(" "),_("li",[v._v("删除重新安装")])])])}),[],!1,null,null,null);_.default=a.exports}}]);