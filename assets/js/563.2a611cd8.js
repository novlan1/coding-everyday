(window.webpackJsonp=window.webpackJsonp||[]).push([[563],{837:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-开始"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-开始"}},[t._v("#")]),t._v(" 1. 开始")]),t._v(" "),s("p",[t._v("简单记录下GP赛事跨端中，遇到的问题和解决的办法。")]),t._v(" "),s("h2",{attrs:{id:"_2-记录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-记录"}},[t._v("#")]),t._v(" 2. 记录")]),t._v(" "),s("h3",{attrs:{id:"_2-1-登录态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-登录态"}},[t._v("#")]),t._v(" 2.1. 登录态")]),t._v(" "),s("p",[t._v("前提是我们的小程序要合入对方的小程序，然而，对方不给小程序密钥。")]),t._v(" "),s("p",[t._v("观察发现他们小程序有返回 MSDK 登录态，申请转换关系权限后，就可以直接拿到登录我们的页面了。简单高效，也算是一个 "),s("code",[t._v("hack")]),t._v(" 的方法吧。")]),t._v(" "),s("p",[t._v("具体通信方式是，在小程序下，"),s("code",[t._v("onLaunch")]),t._v(" 时注入一个 "),s("code",[t._v("MSDK_PARAMS")]),t._v(" 的 "),s("code",[t._v("storage")]),t._v("。网络框架检测到这个 "),s("code",[t._v("storage")]),t._v(" 时，就携带在 url 参数上。")]),t._v(" "),s("p",[t._v("一个细节是，每个页面的 "),s("code",[t._v("onShow")]),t._v(" 方法都要注入，为了防止登录态失效后重新返回我们页面时，登录态没有刷新。")]),t._v(" "),s("p",[t._v("核心逻辑地址：press-plus/tree/release/src/packages/common/mp-msdk")]),t._v(" "),s("h3",{attrs:{id:"_2-2-登录态失效跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-登录态失效跳转"}},[t._v("#")]),t._v(" 2.2. 登录态失效跳转")]),t._v(" "),s("p",[t._v("由于是独立分包，登录态的来源又只能由宿主小程序产生，所以，当我们的页面失效后，需要跳转到他们登录页面，返回返回。")]),t._v(" "),s("p",[t._v("核心逻辑:")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 宿主小程序登录\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loginInGPGameMP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pages "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentPages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" curPage "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" route "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" curPage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WELCOME_PATH")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/pages/welcome/welcome'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WELCOME_PATH")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    uni"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("navigateTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WELCOME_PATH")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WELCOME_PATH")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("?path=/")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("route"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("&data=")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  uni"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("navigateTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-3-appid-转换关系申请"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-appid-转换关系申请"}},[t._v("#")]),t._v(" 2.3. appId 转换关系申请")]),t._v(" "),s("p",[t._v('由于采用 msdk 登录态，所以需要申请"宿主小程序"到"人生"的转换关系。')]),t._v(" "),s("p",[t._v('同时又涉及参赛角色，所以又需要申请"人生"到"宿主游戏"的转换关系。')]),t._v(" "),s("p",[t._v("都是微信、QQ双端。")]),t._v(" "),s("h3",{attrs:{id:"_2-4-独立分包路由拦截"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-独立分包路由拦截"}},[t._v("#")]),t._v(" 2.4. 独立分包路由拦截")]),t._v(" "),s("p",[t._v("小程序内采用的是独立分包，H5不需要，所以需要 hook 路由，找到对应的分包，然后修改跳转路径。")]),t._v(" "),s("p",[t._v("核心逻辑地址：press-plus/tree/release/src/packages/common/uni-router")]),t._v(" "),s("h3",{attrs:{id:"_2-5-独立分包白屏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-独立分包白屏"}},[t._v("#")]),t._v(" 2.5. 独立分包白屏")]),t._v(" "),s("p",[t._v("能引起这个问题的原因挺多，这里的原因是引入了一个比较深的工具方法。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NUMBER_CHI_MAP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@xxx/t-comm/lib/base/number/number'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("推测是由于路径深，打包没找到。uni-app 比较迷，不清楚具体机制，还是排除法发现的。")]),t._v(" "),s("p",[t._v("这个 "),s("code",[t._v("case")]),t._v(" 的解决办法是，自己写 "),s("code",[t._v("NUMBER_CHI_MAP")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_2-6-路由简化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-路由简化"}},[t._v("#")]),t._v(" 2.6. 路由简化")]),t._v(" "),s("p",[t._v("统一路由跳转使用方式，之前在另一个项目中用啥方式的都有，需要各种兜底。本项目又用了微前端，需要跳到对应分包，处理起来会更麻烦。")]),t._v(" "),s("p",[t._v("为了减少后续维护成本，统一路由跳转使用方式，只能用 "),s("code",[t._v("path")]),t._v("、"),s("code",[t._v("query")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/single-match-detail'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  query"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    siteId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    parentId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    childId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-7-查看地图-已废弃"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-查看地图-已废弃"}},[t._v("#")]),t._v(" 2.7. 查看地图（已废弃）")]),t._v(" "),s("p",[t._v("QQ小程序在 iOS 下不支持 "),s("code",[t._v("openLocation")]),t._v("，而 "),s("code",[t._v("webview")]),t._v(" 的方式又没法添加域名校验。")]),t._v(" "),s("p",[t._v("采用的方法是，打开一个自己的 "),s("code",[t._v("webview")]),t._v(" 页面，就是有权限加校验文件，内部嵌套地图 "),s("code",[t._v("apis.map.qq.com")]),t._v(" 的地址。")]),t._v(" "),s("p",[t._v("也就是 "),s("code",[t._v("A webview")]),t._v(" 打开 "),s("code",[t._v("B url")]),t._v("，"),s("code",[t._v("B url")]),t._v(" 是空壳子，装的是 "),s("code",[t._v("C url")]),t._v("。")]),t._v(" "),s("p",[t._v("注意几点，B 不能加登录态校验，且注意 "),s("code",[t._v("html title")]),t._v("，因为 "),s("code",[t._v("webview")]),t._v(" 会将嵌入网页的 "),s("code",[t._v("title")]),t._v(" 当作 "),s("code",[t._v("navigationTitle")]),t._v("。")]),t._v(" "),s("p",[t._v("后面发现这个方法没用，iOS 下依旧会报域名校验错误。")]),t._v(" "),s("h3",{attrs:{id:"_2-8-独立分包-微前端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-独立分包-微前端"}},[t._v("#")]),t._v(" 2.8. 独立分包 + 微前端")]),t._v(" "),s("p",[t._v("核心逻辑。")]),t._v(" "),s("p",[t._v("相比普通分包，个人感觉更多是工程上的好处，不用担心和主应用互相影响，不会增加主应用主包大小，不用互相扯皮。")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("guru")]),t._v(" 后，通信方式需要用框架给的，或者放到 "),s("code",[t._v("storage")]),t._v(" 中。不过我们的业务大部分用不到，核心点在于全局组件和全局逻辑放在了 "),s("code",[t._v("global-component")]),t._v(" 和 "),s("code",[t._v("main.js")]),t._v(" 中，这意味着每个独立分包（这里也是子应用）都有自己的登录态、全局组件、全局变量，根本不需要通信。不过应该始终记住此限制，遇到问题时能及时发现。")]),t._v(" "),s("h3",{attrs:{id:"_2-9-动态切换后端环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-动态切换后端环境"}},[t._v("#")]),t._v(" 2.9. 动态切换后端环境")]),t._v(" "),s("p",[t._v("借鉴了宿主小程序，实现了运行时切换后端环境，这样就不用打包两份了。")]),t._v(" "),s("p",[t._v("不过，这里也是目前唯一需要子应用间通信的地方，因为每个子应用的 "),s("code",[t._v("window.isTestNet")]),t._v(" 都是独立的，解决办法是在 "),s("code",[t._v("main.js")]),t._v(" 中代理 "),s("code",[t._v("window.isTestNet")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hookTestNet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STORAGE_KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DZS_MATCH_NET_ENV_DEBUG'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'isTestNet'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStorageSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STORAGE_KEY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStorageSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STORAGE_KEY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'release'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #ifndef H5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hookTestNet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #endif")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-10-拉起游戏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-拉起游戏"}},[t._v("#")]),t._v(" 2.10. 拉起游戏")]),t._v(" "),s("p",[t._v("核心逻辑，包括微信、QQ小程序的拉起。")]),t._v(" "),s("p",[t._v("已沉淀到 press-plus 中。")])])}),[],!1,null,null,null);s.default=e.exports}}]);