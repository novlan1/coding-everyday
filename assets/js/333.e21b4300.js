(window.webpackJsonp=window.webpackJsonp||[]).push([[333],{633:function(t,e,r){"use strict";r.r(e);var s=r(25),a=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("ul",[e("li",[e("a",{attrs:{href:"#1-git-reset-%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F"}},[t._v("1. git reset 三种模式")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#11-git-reset-%E8%AF%AD%E6%B3%95"}},[t._v("1.1. git reset 语法")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#111-%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0--hard%E5%A6%82git-reset---hard-commit-id"}},[t._v("1.1.1. 使用参数--hard，如git reset --hard "),e("commit",{attrs:{ID:""}})],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"#112-%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0--soft%E5%A6%82-git-reset---soft-commit-id"}},[t._v("1.1.2. 使用参数--soft，如 git reset --soft "),e("commit",{attrs:{ID:""}})],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"#113-%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0--mixed%E6%88%96%E8%80%85%E4%B8%8D%E4%BD%BF%E7%94%A8%E5%8F%82%E6%95%B0%E9%BB%98%E8%AE%A4%E4%B8%BA--mixed%E5%A6%82-git-reset-commit"}},[t._v("1.1.3. 使用参数--mixed或者不使用参数（默认为--mixed），如 git reset "),e("commit")],1)])])]),t._v(" "),e("li",[e("a",{attrs:{href:"#12-git-reset-%E5%8E%9F%E7%90%86"}},[t._v("1.2. git reset 原理")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#121---hard"}},[t._v("1.2.1. --hard")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#122---soft"}},[t._v("1.2.2. --soft")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#123---mixed%E9%BB%98%E8%AE%A4"}},[t._v("1.2.3. --mixed（默认）")])])])]),t._v(" "),e("li",[e("a",{attrs:{href:"#13-%E6%80%BB%E7%BB%93"}},[t._v("1.3. 总结")])])])])]),t._v(" "),e("h2",{attrs:{id:"_1-git-reset-三种模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-reset-三种模式"}},[t._v("#")]),t._v(" 1. git reset 三种模式")]),t._v(" "),e("p",[t._v("git reset --hard指的是恢复某一个库。"),e("strong",[t._v("git reset --hard HEAD^ 是向前回退版本，其中HEAD后面跟几个^ 就是往回退几个版本，如果回退100个版本，可以写成 HEAD~100")]),t._v(" 。")]),t._v(" "),e("p",[t._v("git reset有三种模式，soft,mixed,hard，具体的使用方法下面这张图，展示的很全面了。")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://img.uwayfly.com/article_mike_20200706091315_56bbec5e59dc.png",alt:"img"}})]),t._v(" "),e("h3",{attrs:{id:"_1-1-git-reset-语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-git-reset-语法"}},[t._v("#")]),t._v(" 1.1. git reset 语法")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("命令格式：git reset [--soft | --mixed | --hard] [<commit>]\n")])])]),e("h4",{attrs:{id:"_1-1-1-使用参数-hard-如git-reset-hard"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-使用参数-hard-如git-reset-hard"}},[t._v("#")]),t._v(" 1.1.1. 使用参数--hard，如git reset --hard "),e("commit",{attrs:{ID:""}})],1),t._v(" "),e("ol",[e("li",[e("p",[t._v("替换引用的指向。引用指向新的提交ID。")])]),t._v(" "),e("li",[e("p",[t._v("替换暂存区。替换后，"),e("strong",[t._v("暂存区的内容和引用指向的目录树一致")]),t._v("。")])]),t._v(" "),e("li",[e("p",[t._v("替换工作区。替换后，"),e("strong",[t._v("工作区的内容变得和暂存区一致，也和HEAD所指向的目录树内容相同")]),t._v("。")])])]),t._v(" "),e("h4",{attrs:{id:"_1-1-2-使用参数-soft-如-git-reset-soft"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-使用参数-soft-如-git-reset-soft"}},[t._v("#")]),t._v(" 1.1.2. 使用参数--soft，如 git reset --soft "),e("commit",{attrs:{ID:""}})],1),t._v(" "),e("p",[t._v("即只更改引用的指向，"),e("strong",[t._v("不改变暂存区和工作区")]),t._v("。")]),t._v(" "),e("p",[t._v("只改变commit（指针指向），stage index 和 working directory 不变")]),t._v(" "),e("h4",{attrs:{id:"_1-1-3-使用参数-mixed或者不使用参数-默认为-mixed-如-git-reset"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-使用参数-mixed或者不使用参数-默认为-mixed-如-git-reset"}},[t._v("#")]),t._v(" 1.1.3. 使用参数--mixed或者不使用参数（默认为--mixed），如 git reset "),e("commit")],1),t._v(" "),e("p",[e("strong",[t._v("更改引用的指向及重置暂存区，但是不改变工作区")]),t._v("。")]),t._v(" "),e("p",[t._v("只改变commit（指针指向） 和 add （stage index），working directory不变")]),t._v(" "),e("h3",{attrs:{id:"_1-2-git-reset-原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-git-reset-原理"}},[t._v("#")]),t._v(" 1.2. git reset 原理")]),t._v(" "),e("h4",{attrs:{id:"_1-2-1-hard"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-hard"}},[t._v("#")]),t._v(" 1.2.1. --hard")]),t._v(" "),e("p",[t._v("重置位置的同时，"),e("strong",[t._v("直接将 working Tree工作目录、 index 暂存区及repository 都重置成目标Reset节点的內容")]),t._v("，所以效果看起来等同于清空暂存区和工作区。")]),t._v(" "),e("h4",{attrs:{id:"_1-2-2-soft"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-soft"}},[t._v("#")]),t._v(" 1.2.2. --soft")]),t._v(" "),e("p",[t._v("重置位置的同时，"),e("strong",[t._v("保留working Tree工作目录和index暂存区的内容，只让repository中的内容和 reset 目标节点保持一致")]),t._v("，因此原节点和reset节点之间的【差异变更集】会放入index暂存区中(Staged files)。\n所以效果看起来就是工作目录的内容不变，暂存区原有的内容也不变，只是原节点和Reset节点之间的所有差异都会放到暂存区中。")]),t._v(" "),e("h4",{attrs:{id:"_1-2-3-mixed-默认"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-mixed-默认"}},[t._v("#")]),t._v(" 1.2.3. --mixed（默认）")]),t._v(" "),e("p",[t._v("重置位置的同时，"),e("strong",[t._v("只保留Working Tree工作目录的內容，但会将 Index暂存区 和 Repository 中的內容更改和reset目标节点一致")]),t._v("，因此原节点和Reset节点之间的【差异变更集】会放入Working Tree工作目录中。\n所以效果看起来就是原节点和Reset节点之间的所有差异都会放到工作目录中。")]),t._v(" "),e("h3",{attrs:{id:"_1-3-总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-总结"}},[t._v("#")]),t._v(" 1.3. 总结")]),t._v(" "),e("p",[e("strong",[e("code",[t._v("reset")]),t._v(" 的本质：移动 HEAD 以及它所指向的 "),e("code",[t._v("branch")]),t._v("。")])]),t._v(" "),e("p",[t._v("实质上，"),e("code",[t._v("reset")]),t._v(" 这个指令虽然可以用来撤销 "),e("code",[t._v("commit")]),t._v(" ，但它的实质行为并不是撤销，而是移动 HEAD ，并且「捎带」上 HEAD 所指向的 "),e("code",[t._v("branch")]),t._v('（如果有的话）。也就是说，reset 这个指令的行为其实和它的字面意思 "reset"（重置）十分相符：它是用来重置 HEAD 以及它所指向的 '),e("code",[t._v("branch")]),t._v(" 的位置的。")]),t._v(" "),e("p",[t._v("而 "),e("code",[t._v("reset --hard HEAD^")]),t._v(" 之所以起到了撤销 "),e("code",[t._v("commit")]),t._v(" 的效果，是因为它把 HEAD 和它所指向的 "),e("code",[t._v("branch")]),t._v(" 一起移动到了当前 "),e("code",[t._v("commit")]),t._v(" 的父 "),e("code",[t._v("commit")]),t._v(" 上，从而起到了「撤销」的效果：")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://img.uwayfly.com/article_mike_20200706092506_efca09bf591b.png",alt:"img"}})]),t._v(" "),e("p",[t._v("Git 的历史只能往回看，不能向未来看，所以把 "),e("code",[t._v("HEAD")]),t._v(" 和 "),e("code",[t._v("branch")]),t._v(" 往回移动，就能起到撤回 "),e("code",[t._v("commit")]),t._v(" 的效果。")]),t._v(" "),e("p",[t._v("所以同理，"),e("code",[t._v("reset --hard")]),t._v(" 不仅可以撤销提交，还可以用来把 "),e("code",[t._v("HEAD")]),t._v(" 和 "),e("code",[t._v("branch")]),t._v(" 移动到其他的任何地方。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--hard")]),t._v(" branch2\n")])])]),e("p",[e("img",{attrs:{src:"http://img.uwayfly.com/article_mike_20200706092426_3dd4e8985c8a.png",alt:"img"}})])])}),[],!1,null,null,null);e.default=a.exports}}]);