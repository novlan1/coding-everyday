(window.webpackJsonp=window.webpackJsonp||[]).push([[363],{668:function(_,v,l){"use strict";l.r(v);var i=l(25),o=Object(i.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("ul",[v("li",[v("a",{attrs:{href:"#1-%E6%A6%82%E8%BF%B0"}},[_._v("1. 概述")]),_._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"#11-%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86"}},[_._v("1.1. 目录管理")])])])]),_._v(" "),v("li",[v("a",{attrs:{href:"#linux-%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"}},[_._v("Linux 的文件系统")]),_._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"#ext%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"}},[_._v("EXT文件系统")])])])])]),_._v(" "),v("h2",{attrs:{id:"文件管理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#文件管理"}},[_._v("#")]),_._v(" 文件管理 ")]),_._v(" "),v("h3",{attrs:{id:"_1-概述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[_._v("#")]),_._v(" 1. 概述")]),_._v(" "),v("p",[_._v("文件的逻辑结构\n"),v("img",{attrs:{src:"/imgs/file_management.png",alt:"文件的逻辑结构"}})]),_._v(" "),v("p",[_._v("有结构文件：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 文件内容由"),v("strong",[_._v("定长记录")]),_._v("和"),v("strong",[_._v("可变长记录")]),_._v("组成")]),_._v(" "),v("li",[_._v("[ ] 定长记录"),v("strong",[_._v("存储文件格式")]),_._v("、"),v("strong",[_._v("文件描述")]),_._v("等结构化数据项")]),_._v(" "),v("li",[_._v("[ ] 可变长记录存储"),v("strong",[_._v("文件具体内容")])])]),_._v(" "),v("p",[_._v("无结构文件：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 也称为"),v("strong",[_._v("流式文件")])]),_._v(" "),v("li",[_._v("[ ] 文件内容长度以"),v("strong",[_._v("字节")]),_._v("为单位")]),_._v(" "),v("li",[_._v("[ ] 比如"),v("code",[_._v("exe")]),_._v("文件、 "),v("code",[_._v("dll")]),_._v("文件、"),v("code",[_._v("so")]),_._v("文件")])]),_._v(" "),v("p",[_._v("顺序文件：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 按照顺序存放在存储介质中文件")]),_._v(" "),v("li",[_._v("[ ] "),v("strong",[_._v("磁带")]),_._v("的存储特性使得磁带文件"),v("strong",[_._v("只能存储顺序文件")]),_._v("（只能顺序读取）")]),_._v(" "),v("li",[_._v("[ ] 顺序文件是所有逻辑文件中"),v("strong",[_._v("存储效率最高")]),_._v("的")])]),_._v(" "),v("p",[_._v("问题："),v("strong",[_._v("增删查")])]),_._v(" "),v("p",[_._v("索引文件：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("strong",[_._v("可变长文件")]),_._v("不适合使用顺序文件存储")]),_._v(" "),v("li",[_._v("[ ] 索引文件是为了解决可变长文件存储而发明的")]),_._v(" "),v("li",[_._v("[ ] 需要配合"),v("strong",[_._v("索引表")]),_._v("完成存储")])]),_._v(" "),v("p",[_._v("辅存的存储空间分配方式：")]),_._v(" "),v("ol",[v("li",[_._v("连续分配")]),_._v(" "),v("li",[_._v("链接分配")]),_._v(" "),v("li",[_._v("索引分配")])]),_._v(" "),v("p",[_._v("连续分配")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 读取快，容易")]),_._v(" "),v("li",[_._v("[ ] 要求"),v("strong",[_._v("满足容量的连续存储空间")])])]),_._v(" "),v("p",[_._v("链接分配，")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 文件存储在离散的盘块中，")]),_._v(" "),v("li",[_._v("[ ] 需要额外的存储空间存储文件的"),v("strong",[_._v("盘块链接顺序")])]),_._v(" "),v("li",[_._v("[ ] 分为"),v("strong",[_._v("隐式链接")]),_._v("和"),v("strong",[_._v("显式链接")])])]),_._v(" "),v("p",[_._v("隐式链接，")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("strong",[_._v("下一个链接存储在当前盘块内")])]),_._v(" "),v("li",[_._v("[ ] 适合顺序访问，随机访问效率很低，因为"),v("strong",[_._v("不论访问哪一个都需要从第一个开始")])]),_._v(" "),v("li",[_._v("[ ] "),v("strong",[_._v("可靠性差")]),_._v("，任何一个链接出问题都会导致所有文件访问出错")])]),_._v(" "),v("p",[_._v("显式连接：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("code",[_._v("FAT")]),_._v("表（物理块和下一盘块），"),v("code",[_._v("File Allocation Table")])]),_._v(" "),v("li",[_._v("[ ] 不支持高效的直接存储（"),v("code",[_._v("FAT")]),_._v("记录项多）")]),_._v(" "),v("li",[_._v("[ ] 检索时"),v("code",[_._v("FAT")]),_._v("表占用文件的逻辑结构间（需要将整个"),v("code",[_._v("FAT")]),_._v("加载到内存）")])]),_._v(" "),v("p",[_._v("索引分配：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 把文件的所有盘块集中存储（索引）")]),_._v(" "),v("li",[_._v("[ ] 读取某个文件时，将文件索引读取进内存即可")]),_._v(" "),v("li",[_._v("[ ] "),v("strong",[_._v("每个文件都拥有一个索引块")]),_._v("，记录所有盘块信息")]),_._v(" "),v("li",[_._v("[ ] 支持直接访问盘块")]),_._v(" "),v("li",[_._v("[ ] "),v("strong",[_._v("文件较大")]),_._v("时有优势")])]),_._v(" "),v("p",[_._v("类比：")]),_._v(" "),v("ol",[v("li",[_._v("笔记本上的笔记是连续分配")]),_._v(" "),v("li",[_._v("解密游戏是链接分配")]),_._v(" "),v("li",[_._v("字典是索引分配")])]),_._v(" "),v("p",[_._v("辅存存储空间管理：")]),_._v(" "),v("ol",[v("li",[_._v("空闲表")]),_._v(" "),v("li",[_._v("空闲链表")]),_._v(" "),v("li",[_._v("位示图")])]),_._v(" "),v("p",[_._v("空闲表：")]),_._v(" "),v("p",[v("img",{attrs:{src:"/imgs/file_management_empty_table.png",alt:"空闲表"}})]),_._v(" "),v("p",[_._v("空闲表与空闲链表：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 空闲盘区的分配与内存分配类似")]),_._v(" "),v("li",[_._v("[ ] 首次适应算法、循环适应算法等")]),_._v(" "),v("li",[_._v("[ ] 回收过程也与内存回收类似")])]),_._v(" "),v("p",[_._v("位示图（0没被使用，1已经被使用）：")]),_._v(" "),v("p",[v("img",{attrs:{src:"/imgs/file_management_bitmap.png",alt:"位示图"}})]),_._v(" "),v("p",[_._v("位示图：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 维护成本很低")]),_._v(" "),v("li",[_._v("[ ] 可以非常容易找到空闲盘块")]),_._v(" "),v("li",[_._v("[ ] 使用0/1比特位，占用空间很小")])]),_._v(" "),v("h4",{attrs:{id:"_1-1-目录管理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-目录管理"}},[_._v("#")]),_._v(" 1.1. 目录管理")]),_._v(" "),v("p",[_._v("目录树\n"),v("img",{attrs:{src:"/imgs/catalog_management.png",alt:"目录管理"}})]),_._v(" "),v("p",[_._v("任何文件或目录都只有唯一路径")]),_._v(" "),v("h3",{attrs:{id:"linux-的文件系统"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#linux-的文件系统"}},[_._v("#")]),_._v(" Linux 的文件系统")]),_._v(" "),v("ol",[v("li",[v("code",[_._v("FAT")])]),_._v(" "),v("li",[v("code",[_._v("NTFS")])]),_._v(" "),v("li",[v("code",[_._v("EXT")])])]),_._v(" "),v("p",[v("code",[_._v("FAT")]),_._v("("),v("code",[_._v("File Allocation Table")]),_._v(")")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("code",[_._v("FAT16")]),_._v("、"),v("code",[_._v("FAT32")]),_._v("等，微软"),v("code",[_._v("Doc/Windows")]),_._v("使用的文件系统")]),_._v(" "),v("li",[_._v("[ ] 使用一张表保存盘块的信息")])]),_._v(" "),v("p",[v("code",[_._v("NTFS")]),_._v("("),v("code",[_._v("New Technology File System")]),_._v(")")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("code",[_._v("WindowsNT")]),_._v("环境的文件系统（"),v("code",[_._v("win7/win8/win10")]),_._v(" 都可以使用）")]),_._v(" "),v("li",[_._v("[ ] 对"),v("code",[_._v("FAT")]),_._v("进行了改进")])]),_._v(" "),v("p",[v("code",[_._v("EXT2/3/4")])]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("code",[_._v("EXT")]),_._v("("),v("code",[_._v("Extended file system")]),_._v(")扩展文件系统")]),_._v(" "),v("li",[_._v("[ ] "),v("code",[_._v("Linux")]),_._v("的文件系统（不能被"),v("code",[_._v("window")]),_._v("识别）")]),_._v(" "),v("li",[_._v("[ ] "),v("code",[_._v("EXT2/3/4")]),_._v("数字表示"),v("strong",[_._v("第几代")])])]),_._v(" "),v("p",[_._v("格式化U盘一般格式为"),v("code",[_._v("NTFS")]),_._v("，能被"),v("code",[_._v("windows")]),_._v("和"),v("code",[_._v("linux")]),_._v("同时识别。")]),_._v(" "),v("h4",{attrs:{id:"ext文件系统"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ext文件系统"}},[_._v("#")]),_._v(" EXT文件系统")]),_._v(" "),v("p",[_._v("分为：")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("Boot Sector")]),_._v("：启动扇区，安装开机管理程序")]),_._v(" "),v("li",[v("code",[_._v("Block Group")]),_._v("：块组，存储数据的实际位置")])]),_._v(" "),v("p",[v("code",[_._v("Block Group")]),_._v("细分：")]),_._v(" "),v("p",[v("img",{attrs:{src:"/imgs/ext_file_system.png",alt:""}})]),_._v(" "),v("p",[v("code",[_._v("Inode Table")])]),_._v(" "),v("ul",[v("li",[_._v("[ ] 存放文件"),v("code",[_._v("Inode")])]),_._v(" "),v("li",[_._v("[ ] 每一个文件（目录）都有一个"),v("code",[_._v("Inode")]),_._v("（索引节点）")])]),_._v(" "),v("p",[v("code",[_._v("Inode")]),_._v("保存信息包括：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 索引节点编号")]),_._v(" "),v("li",[_._v("[ ] 文件类型")]),_._v(" "),v("li",[_._v("[ ] 文件权限")]),_._v(" "),v("li",[_._v("[ ] 文件物理地址（"),v("code",[_._v("Data block")]),_._v("位置）")]),_._v(" "),v("li",[_._v("[ ] 文件长度")]),_._v(" "),v("li",[_._v("[ ] 文件连接计数")]),_._v(" "),v("li",[_._v("[ ] 文件存取时间")]),_._v(" "),v("li",[_._v("[ ] 文件状态")]),_._v(" "),v("li",[_._v("[ ] 访问计数")]),_._v(" "),v("li",[_._v("[ ] 链接指针")])]),_._v(" "),v("p",[v("strong",[_._v("文件名")]),_._v("不是存放在"),v("code",[_._v("Inode")]),_._v("节点上的，而是存放在目录的"),v("code",[_._v("Inode")]),_._v("节点上")]),_._v(" "),v("ul",[v("li",[_._v("原因：列出目录文件的时候无需加载文件的"),v("code",[_._v("Inode")])])]),_._v(" "),v("p",[v("code",[_._v("Inode bitmap")]),_._v("：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("code",[_._v("Inode")]),_._v("的位示图")]),_._v(" "),v("li",[_._v("[ ] 记录已分配的"),v("code",[_._v("Inode")]),_._v("和未分配的"),v("code",[_._v("Inode")])])]),_._v(" "),v("p",[v("img",{attrs:{src:"/imgs/linux_inode_bitmap.jpg",alt:""}})]),_._v(" "),v("p",[v("code",[_._v("Data Block")]),_._v("：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 存放文件内容")]),_._v(" "),v("li",[_._v("[ ] 每个"),v("code",[_._v("block")]),_._v("都有唯一的编号")]),_._v(" "),v("li",[_._v("[ ] 文件的"),v("code",[_._v("block")]),_._v("记录在文件的"),v("code",[_._v("Inode")]),_._v("上")])]),_._v(" "),v("p",[v("code",[_._v("Block bitmap")]),_._v("：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 功能与"),v("code",[_._v("Inode bitmap")]),_._v("类似")]),_._v(" "),v("li",[_._v("[ ] 记录"),v("code",[_._v("Data block")]),_._v("使用情况")])]),_._v(" "),v("p",[v("code",[_._v("Superblock")]),_._v(":")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 最重要")]),_._v(" "),v("li",[_._v("[ ] 记录整个文件系统相关信息的地方")]),_._v(" "),v("li",[_._v("[ ] "),v("code",[_._v("Block")]),_._v("和"),v("code",[_._v("Inode")]),_._v(" 的使用情况")]),_._v(" "),v("li",[_._v("[ ] 时间信息、控制信息等")])])])}),[],!1,null,null,null);v.default=o.exports}}]);