(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{414:function(t,s,a){"use strict";a.r(s);var e=a(14),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("ul",[s("li",[s("a",{attrs:{href:"#1-babelpreset-env"}},[t._v("1. @babel/preset-env")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#11-%E5%8F%82%E6%95%B0"}},[t._v("1.1. 参数")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#111-target-%E8%AE%BE%E7%BD%AE%E6%94%AF%E6%8C%81%E7%9A%84%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"}},[t._v("1.1.1. "),s("code",[t._v("target")]),t._v(" 设置支持的运行环境")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#112-modules-%E5%B0%86es6%E6%A8%A1%E5%9D%97%E8%AF%AD%E6%B3%95%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%8F%A6%E4%B8%80%E7%A7%8D%E6%A8%A1%E5%9D%97%E7%B1%BB%E5%9E%8B"}},[t._v("1.1.2. "),s("code",[t._v("modules")]),t._v(" 将ES6模块语法转换为另一种模块类型")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#113-debug-consolelog%E8%BE%93%E5%87%BA%E6%8F%92%E4%BB%B6%E7%AD%89%E4%BF%A1%E6%81%AF"}},[t._v("1.1.3. "),s("code",[t._v("debug")]),t._v(" "),s("code",[t._v("console.log")]),t._v("输出插件等信息")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#114-usebuiltins%E5%AE%83%E6%9C%89%E4%B8%89%E4%B8%AA%E5%80%BC%E5%8F%AF%E4%BB%A5%E9%80%89"}},[t._v("1.1.4. "),s("code",[t._v("useBuiltIns")]),t._v("，它有三个值可以选")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#1141-entry"}},[t._v("1.1.4.1. "),s("code",[t._v("entry")])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#1142-useage"}},[t._v("1.1.4.2. useage")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#1143-false"}},[t._v("1.1.4.3. false")])])])])])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E9%9B%86%E6%88%90babel-polyfill"}},[t._v("2. 为什么要集成babel-polyfill?")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#3-babelplugin-transform-runtime"}},[t._v("3. "),s("code",[t._v("@babel/plugin-transform-runtime")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#31-%E9%85%8D%E7%BD%AE"}},[t._v("3.1. 配置")])])])])]),t._v(" "),s("h2",{attrs:{id:"_1-babel-preset-env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-babel-preset-env"}},[t._v("#")]),t._v(" 1. @babel/preset-env")]),t._v(" "),s("h3",{attrs:{id:"_1-1-参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-参数"}},[t._v("#")]),t._v(" 1.1. 参数")]),t._v(" "),s("h4",{attrs:{id:"_1-1-1-target-设置支持的运行环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-target-设置支持的运行环境"}},[t._v("#")]),t._v(" 1.1.1. "),s("code",[t._v("target")]),t._v(" 设置支持的运行环境")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("{ [string]: number | string }, 默认为 {}。\n")])])]),s("h4",{attrs:{id:"_1-1-2-modules-将es6模块语法转换为另一种模块类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-modules-将es6模块语法转换为另一种模块类型"}},[t._v("#")]),t._v(" 1.1.2. "),s("code",[t._v("modules")]),t._v(" 将ES6模块语法转换为另一种模块类型")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('"amd" | "umd" | "systemjs" | "commonjs" | false， 默认为 "commonjs".\n')])])]),s("p",[t._v("将其设置为 false 就不会转换模块。")]),t._v(" "),s("h4",{attrs:{id:"_1-1-3-debug-console-log输出插件等信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-debug-console-log输出插件等信息"}},[t._v("#")]),t._v(" 1.1.3. "),s("code",[t._v("debug")]),t._v(" "),s("code",[t._v("console.log")]),t._v("输出插件等信息")]),t._v(" "),s("p",[s("code",[t._v("boolean")]),t._v("， 默认为 "),s("code",[t._v("false")]),t._v("。")]),t._v(" "),s("p",[t._v("将使用的目标浏览器/插件和在 数据插件版本 中指定的版本用 "),s("code",[t._v("console.log")]),t._v(" 输出。")]),t._v(" "),s("h4",{attrs:{id:"_1-1-4-usebuiltins-它有三个值可以选"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4-usebuiltins-它有三个值可以选"}},[t._v("#")]),t._v(" 1.1.4. "),s("code",[t._v("useBuiltIns")]),t._v("，它有三个值可以选")]),t._v(" "),s("h5",{attrs:{id:"_1-1-4-1-entry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4-1-entry"}},[t._v("#")]),t._v(" 1.1.4.1. "),s("code",[t._v("entry")])]),t._v(" "),s("p",[t._v("这是一种入口导入方式, 只要我们在打包配置入口 或者 文件入口写入 "),s("code",[t._v('import "core-js"')]),t._v(" 这样一串代码， "),s("code",[t._v("babel")]),t._v(" 就会替我们根据当前你所配置的目标浏览器("),s("code",[t._v("browserslist")]),t._v(")来引入所需要的"),s("code",[t._v("polyfill")]),t._v(" 。")]),t._v(" "),s("p",[t._v("像这样， 我们在 index.js 文件中加入试一下core-js")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/index.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"core-js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" item "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("babel配置如下")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"presets"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"useBuiltIns"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"entry"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h5",{attrs:{id:"_1-1-4-2-useage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4-2-useage"}},[t._v("#")]),t._v(" 1.1.4.2. useage")]),t._v(" "),s("p",[t._v("这个就比较神奇了， useBuiltIns = useage 时，会参考目标浏览器（browserslist） 和 代码中所使用到的特性来按需加入 polyfill")]),t._v(" "),s("p",[t._v("当然， 使用 useBuiltIns = useage, 还需要填写另一个参数 corejs 的版本号，")]),t._v(" "),s("p",[t._v("core-js 支持两个版本， 2 或 3， 很多新特性已经不会加入到 2 里面了， 比如: flat 等等最新的方法， 2 这个版本里面都是没有的， 所以建议大家用3")]),t._v(" "),s("p",[t._v("此时的 .babelrc")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"useBuiltIns"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"usage"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"corejs"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h5",{attrs:{id:"_1-1-4-3-false"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4-3-false"}},[t._v("#")]),t._v(" 1.1.4.3. false")]),t._v(" "),s("p",[t._v("剩下最后一个 "),s("code",[t._v("useBuiltIns = false")]),t._v(" , 那就简单了， 这也是默认值， 使用这个值时不引入 "),s("code",[t._v("polyfill")])]),t._v(" "),s("h2",{attrs:{id:"_2-为什么要集成babel-polyfill"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-为什么要集成babel-polyfill"}},[t._v("#")]),t._v(" 2. 为什么要集成babel-polyfill?")]),t._v(" "),s("p",[t._v("Babel默认只转换新的JavaScript句法（"),s("code",[t._v("syntax")]),t._v("），如箭头函数、"),s("code",[t._v("const")]),t._v("、"),s("code",[t._v("class")]),t._v("、扩展运算符，而不转换新的API，比如"),s("code",[t._v("Iterator")]),t._v("、"),s("code",[t._v("Generator")]),t._v("、"),s("code",[t._v("Set")]),t._v("、"),s("code",[t._v("Maps")]),t._v("、"),s("code",[t._v("Proxy")]),t._v("、"),s("code",[t._v("Reflect")]),t._v("、"),s("code",[t._v("Symbol")]),t._v("、"),s("code",[t._v("Promise")]),t._v("等全局对象，以及一些定义在全局对象上的方法（比如"),s("code",[t._v("Object.assign")]),t._v("）都不会转码。")]),t._v(" "),s("p",[t._v("举例来说，ES6在Array对象上新增了"),s("code",[t._v("Array.from")]),t._v("方法。Babel就不会转码这个方法。如果想让这个方法运行，必须使用"),s("code",[t._v("babel-polyfill")]),t._v("，为当前环境提供一个垫片。")]),t._v(" "),s("h2",{attrs:{id:"_3-babel-plugin-transform-runtime"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-babel-plugin-transform-runtime"}},[t._v("#")]),t._v(" 3. "),s("code",[t._v("@babel/plugin-transform-runtime")])]),t._v(" "),s("p",[t._v("这是一个"),s("code",[t._v("babel")]),t._v("插件，使用这个插件的同时，必须同时安装"),s("code",[t._v("@babel/runtime")]),t._v("这个包，而且必须是安装在"),s("code",[t._v("dependencies")]),t._v("里面，而非"),s("code",[t._v("devDependencies")]),t._v("里面。")]),t._v(" "),s("ol",[s("li",[t._v("将"),s("code",[t._v("preset-env")]),t._v("所产生的"),s("code",[t._v("helpers")]),t._v("函数提出到一个独立文件中，从而减少代码量")]),t._v(" "),s("li",[t._v("建立运行时沙盒，避免像"),s("code",[t._v("babel-polyfill")]),t._v("一样，修改全局对象，造成全局污染")])]),t._v(" "),s("h3",{attrs:{id:"_3-1-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-配置"}},[t._v("#")]),t._v(" 3.1. 配置")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("corejs")])])]),t._v(" "),s("p",[t._v("配置版本，传入"),s("code",[t._v("corejs")]),t._v("的值和同时安装的"),s("code",[t._v("@babel/runtime")]),t._v("包是不一致的，你需要手动安装。例如，你传入2则需要手动安装"),s("code",[t._v("@babel/runtime-corejs2")]),t._v("，传入3则需要手动安装"),s("code",[t._v("@babel/runtime-corejs3")]),t._v("，并且，这三个包只安装对应的一个就好，它们是互斥的。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("helpers")])])]),t._v(" "),s("p",[t._v("是否要将所有"),s("code",[t._v("helper")]),t._v("函数提炼到另外一个公共文件中。默认为"),s("code",[t._v("true")]),t._v("。")])])}),[],!1,null,null,null);s.default=r.exports}}]);