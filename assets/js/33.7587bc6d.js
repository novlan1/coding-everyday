(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{336:function(_,v,t){"use strict";t.r(v);var s=t(25),i=Object(s.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("ul",[v("li",[v("a",{attrs:{href:"#1-ip%E5%8D%8F%E8%AE%AE"}},[_._v("1. IP协议")]),_._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"#11-ip%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3"}},[_._v("1.1. IP协议详解")])]),_._v(" "),v("li",[v("a",{attrs:{href:"#12-ip%E5%8D%8F%E8%AE%AE%E7%9A%84%E8%BD%AC%E5%8F%91%E6%B5%81%E7%A8%8B"}},[_._v("1.2. IP协议的转发流程")])]),_._v(" "),v("li",[v("a",{attrs:{href:"#13-ip%E5%9C%B0%E5%9D%80%E7%9A%84%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"}},[_._v("1.3. IP地址的子网划分")]),_._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"#131-%E5%88%86%E7%B1%BB%E7%9A%84ip%E5%9C%B0%E5%9D%80"}},[_._v("1.3.1. 分类的IP地址")])]),_._v(" "),v("li",[v("a",{attrs:{href:"#132-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91"}},[_._v("1.3.2. 划分子网")])])])]),_._v(" "),v("li",[v("a",{attrs:{href:"#14-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat%E6%8A%80%E6%9C%AF"}},[_._v("1.4. 网络地址转换"),v("code",[_._v("nat")]),_._v("技术")]),_._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"#141-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2natnetwork-address-translation"}},[_._v("1.4.1. 网络地址转换NAT（"),v("code",[_._v("Network Address Translation")]),_._v("）")])])])])])])]),_._v(" "),v("h2",{attrs:{id:"_1-ip协议"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-ip协议"}},[_._v("#")]),_._v(" 1. IP协议")]),_._v(" "),v("h3",{attrs:{id:"_1-1-ip协议详解"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ip协议详解"}},[_._v("#")]),_._v(" 1.1. IP协议详解")]),_._v(" "),v("p",[_._v("虚拟互连网络")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 实际的计算机网络是错综复杂的")]),_._v(" "),v("li",[_._v("[ ] 物理设备通过使用IP协议，"),v("strong",[_._v("屏蔽了物理网络之间的差异")]),_._v("，无需关注网络细节")])]),_._v(" "),v("p",[_._v("IP协议作用：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] IP协议使得复杂的实际网络变为一个虚拟互连的网络")]),_._v(" "),v("li",[_._v("[ ] IP协议使得网络层可以屏蔽底层细节而专注网络层的数据转发")]),_._v(" "),v("li",[_._v("[ ] IP协议解决了"),v("strong",[_._v("在虚拟网络中数据报传输路径")]),_._v("的问题")])]),_._v(" "),v("p",[_._v("IP协议")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("strong",[_._v("点分十进制")]),_._v("表示")]),_._v(" "),v("li",[_._v("[ ] 32位，常分为4个8位")])]),_._v(" "),v("p",[_._v("IP首部，至少有"),v("code",[_._v("20")]),_._v("个字节的长度（"),v("code",[_._v("4*5")]),_._v("）\n"),v("img",{attrs:{src:"/imgs/ip_protocol_header.png",alt:"IP首部"}})]),_._v(" "),v("ul",[v("li",[_._v("[ ] 版本\n"),v("ul",[v("li",[_._v("[ ] 占4位，当前是"),v("code",[_._v("IPv4")]),_._v("，也有"),v("code",[_._v("IPv6")]),_._v("，通信双方必须使用一致的版本")])])]),_._v(" "),v("li",[_._v("[ ] 首部位长度\n"),v("ul",[v("li",[_._v("[ ] 占4位，最大数值为15，表示IP首部长度，单位是“32位字”（4个字节），也就是IP首部最大长度为60字节")])])]),_._v(" "),v("li",[_._v("[ ] 总长度\n"),v("ul",[v("li",[_._v("[ ] 占16位，最大数值为65535，表示的是IP数据报总长度（IP首部+IP数据）比MTU高的时候分片")])])]),_._v(" "),v("li",[_._v("[ ] TTL\n"),v("ul",[v("li",[_._v("[ ] 占8位，表明"),v("strong",[_._v("IP数据报文在网络中的寿命")])]),_._v(" "),v("li",[_._v("[ ] 每经过一个设备，TTL减1，当TTL为0时，网络设备必须丢弃该报文。（找不到终点时，避免在网络中无限传输，来消耗带宽）")])])]),_._v(" "),v("li",[_._v("[ ] 协议\n"),v("ul",[v("li",[_._v("[ ] 占8位，表明IP数据所携带的具体数据是什么协议的")]),_._v(" "),v("li",[_._v("[ ] （如TCP、UDP，还有可能是IP，即在IP数据中放IP）")])])]),_._v(" "),v("li",[_._v("[ ] 首部校验和\n"),v("ul",[v("li",[_._v("[ ] 占16位，校验IP首部是否出错")])])])]),_._v(" "),v("h3",{attrs:{id:"_1-2-ip协议的转发流程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-ip协议的转发流程"}},[_._v("#")]),_._v(" 1.2. IP协议的转发流程")]),_._v(" "),v("p",[_._v("逐跳（"),v("code",[_._v("hop-by-hop")]),_._v("）")]),_._v(" "),v("ul",[v("li",[_._v("一跳一跳，从一个设备跳到下一个设备")])]),_._v(" "),v("p",[_._v("路由表")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("strong",[_._v("目的IP地址和下一跳IP地址")]),_._v("的对应关系")]),_._v(" "),v("li",[_._v("[ ] 计算机和路由器都有路由表")])]),_._v(" "),v("p",[_._v("IP协议的转发流程（"),v("code",[_._v("A=>E=>F")]),_._v("）：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] A"),v("strong",[_._v("查询路由表")]),_._v("发现"),v("strong",[_._v("下一跳IP")]),_._v("地址为E，将IP数据报"),v("strong",[_._v("交给数据链路层")]),_._v("，查询"),v("strong",[_._v("ARP缓存表")]),_._v("得到"),v("strong",[_._v("目的Mac地址")]),_._v("后，并告知目的Mac地址是E，将数据链路层"),v("strong",[_._v("填充源Mac地址和目的Mac地址E")]),_._v("，数据链路层"),v("strong",[_._v("通过物理层将数据发送给E")])]),_._v(" "),v("li",[_._v("[ ] E的数据链路层接收到数据帧，把帧数据交给"),v("strong",[_._v("网络层")]),_._v("，网络层查询路由表，发现下一跳为F，E将IP数据报交给数据链路层，查询APR缓存表得到目的Mac地址后，并且告知目的Mac地址为F，数据链路层填充源Mac地址E和目的Mac地址F，封装成帧，通过物理层将数据发送给F。")])]),_._v(" "),v("p",[_._v("转化过程中MAC地址和IP地址的不同：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 数据帧每一跳的"),v("strong",[_._v("Mac地址都在变化")])]),_._v(" "),v("li",[_._v("[ ] IP数据报每一跳的"),v("strong",[_._v("IP地址始终不变")])])]),_._v(" "),v("h3",{attrs:{id:"_1-3-ip地址的子网划分"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-ip地址的子网划分"}},[_._v("#")]),_._v(" 1.3. IP地址的子网划分")]),_._v(" "),v("h4",{attrs:{id:"_1-3-1-分类的ip地址"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-分类的ip地址"}},[_._v("#")]),_._v(" 1.3.1. 分类的IP地址")]),_._v(" "),v("p",[v("img",{attrs:{src:"/imgs/ip_address_types.png",alt:"分类的IP地址"}})]),_._v(" "),v("ul",[v("li",[_._v("[ ] A类地址前面是"),v("code",[_._v("0")]),_._v("，网络号"),v("code",[_._v("8")]),_._v("位，主机号"),v("code",[_._v("24")]),_._v("位")]),_._v(" "),v("li",[_._v("[ ] B类地址前面是"),v("code",[_._v("10")]),_._v("，网络号"),v("code",[_._v("16")]),_._v("位，主机号"),v("code",[_._v("16")]),_._v("位")]),_._v(" "),v("li",[_._v("[ ] C类地址前面是"),v("code",[_._v("110")]),_._v("，网络号"),v("code",[_._v("24")]),_._v("位，主机号"),v("code",[_._v("8")]),_._v("位")]),_._v(" "),v("li",[_._v("[ ] D类地址前面是"),v("code",[_._v("1110")])]),_._v(" "),v("li",[_._v("[ ] E类地址前面是"),v("code",[_._v("1111")])])]),_._v(" "),v("p",[_._v("判断IP地址类别，并不是死记硬背界限，而是把前八位转为二进制，看前几位和哪一类的规则能匹配上")]),_._v(" "),v("p",[v("img",{attrs:{src:"/imgs/ip_address_types2.png",alt:"分类的IP地址"}})]),_._v(" "),v("p",[_._v("特殊的主机号：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 主机号全为"),v("code",[_._v("0")]),_._v("表示当前网络段，不可分配为特定主机，如"),v("code",[_._v("1.0.0.0")])]),_._v(" "),v("li",[_._v("[ ] 主机号全为"),v("code",[_._v("1")]),_._v("表示"),v("strong",[_._v("广播地址")]),_._v("，"),v("strong",[_._v("向当前网络段所有主机发消息")]),_._v("，如"),v("code",[_._v("1.255.255.255")])])]),_._v(" "),v("p",[_._v("特殊的网络号：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] A类地址"),v("strong",[_._v("网络段全0")]),_._v("表示特殊网络")]),_._v(" "),v("li",[_._v("[ ] A类地址"),v("strong",[_._v("网络段后7位全1")]),_._v("（"),v("code",[_._v("127")]),_._v("）表示回环地址")]),_._v(" "),v("li",[_._v("[ ] B类地址网络段（"),v("code",[_._v("128.0")]),_._v("）不可使用")]),_._v(" "),v("li",[_._v("[ ] C类地址网络段（"),v("code",[_._v("192.0.0")]),_._v("）不可使用")])]),_._v(" "),v("p",[_._v("更正：\n"),v("img",{attrs:{src:"/imgs/ip_address_types3.jpg",alt:"分类的IP地址"}})]),_._v(" "),v("p",[v("code",[_._v("127.0.0.1")]),_._v("回环地址")]),_._v(" "),v("blockquote",[v("p",[_._v("127.0.0.1，通常被称为本地回环地址（Loopback Address），不属于任何一个有类别地址类。它代表设备的本地虚拟接口，所以默认被看作是永远不会宕掉的接口。在windows操作系统中也有相似的定义，所以通常在安装网卡前就可以ping通这个本地回环地址。一般都会用来检查本地网络协议、基本数据接口等是否正常的。")])]),_._v(" "),v("h4",{attrs:{id:"_1-3-2-划分子网"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-划分子网"}},[_._v("#")]),_._v(" 1.3.2. 划分子网")]),_._v(" "),v("p",[_._v("某公司"),v("code",[_._v("100")]),_._v("名员工，申请哪种网络段？")]),_._v(" "),v("ul",[v("li",[v("code",[_._v("C")]),_._v("类地址拥有主机号"),v("code",[_._v("254")]),_._v("个，最节约")])]),_._v(" "),v("p",[_._v("如果拥有"),v("code",[_._v("256")]),_._v("名员工，则需要申请B类地址，但极其浪费")]),_._v(" "),v("p",[_._v("划分子网的例子：\n"),v("img",{attrs:{src:"/imgs/ip_address_split_children.png",alt:"划分子网"}})]),_._v(" "),v("ul",[v("li",[_._v("[ ] 减少浪费")]),_._v(" "),v("li",[_._v("[ ] 划分子网后，子网掩码能快速判断IP属于哪个网络号")])]),_._v(" "),v("p",[_._v("子网掩码")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 32位")]),_._v(" "),v("li",[_._v("[ ] 由"),v("strong",[_._v("连续的1和连续的0")]),_._v("组成")]),_._v(" "),v("li",[_._v("[ ] 某一个子网的子网掩码具备"),v("strong",[_._v("网络号位数个连续的1")])]),_._v(" "),v("li",[_._v("[ ] 作用："),v("strong",[_._v("能快速判断某IP属于哪个网络号")])])]),_._v(" "),v("p",[_._v("上一个例子的子网掩码为：\n"),v("img",{attrs:{src:"/imgs/ip_address_split_children2.png",alt:"划分子网"}})]),_._v(" "),v("ul",[v("li",[_._v("A类地址子网掩码为"),v("code",[_._v("255.0.0.0")])]),_._v(" "),v("li",[_._v("B类地址子网掩码为"),v("code",[_._v("255.255.0.0")])]),_._v(" "),v("li",[_._v("C类地址子网掩码为"),v("code",[_._v("255.255.255.0")])])]),_._v(" "),v("p",[_._v("子网掩码与IP地址相与可以得到IP地址的网络号，如\n"),v("code",[_._v("193.10.10.129")]),_._v("的子网掩码为"),v("code",[_._v("255.255.255.128")]),_._v("，两者相与可以得到"),v("code",[_._v("193.10.10.128")])]),_._v(" "),v("p",[_._v("无分类编地址"),v("code",[_._v("CIDR")]),_._v("\n\t没有ABC类网络号或子网划分\n\t将网络前缀相同的IP地址称为一个"),v("code",[_._v("CIDR")]),_._v("地址块\n\t网络前缀是任意位数的\n\t子网掩码等与前面相同，只是采用了斜线记法，比上面方法常用")]),_._v(" "),v("p",[_._v("斜线记法：\n"),v("code",[_._v("193.10.10.129/25")]),_._v("表示它的网络前缀有"),v("code",[_._v("25")]),_._v("位，主机号则为7位")]),_._v(" "),v("p",[v("img",{attrs:{src:"/imgs/ip_address_split_children3.png",alt:"划分子网"}})]),_._v(" "),v("h3",{attrs:{id:"_1-4-网络地址转换nat技术"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-网络地址转换nat技术"}},[_._v("#")]),_._v(" 1.4. 网络地址转换"),v("code",[_._v("nat")]),_._v("技术")]),_._v(" "),v("p",[_._v("产生背景：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] IPv4最多只要40+亿个IP地址")]),_._v(" "),v("li",[_._v("[ ] 不够用")])]),_._v(" "),v("p",[_._v("分类：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 内网地址："),v("strong",[_._v("内部机构")]),_._v("使用，避免与外网地址重复")]),_._v(" "),v("li",[_._v("[ ] 外网地址："),v("strong",[_._v("全球范围")]),_._v("使用，全球公网唯一")])]),_._v(" "),v("p",[_._v("三类内网地址")]),_._v(" "),v("ul",[v("li",[_._v("[ ] "),v("code",[_._v("10.0.0.0 ~ 10.255.255.255")]),_._v("（支持千万数量级设备）")]),_._v(" "),v("li",[_._v("[ ] "),v("code",[_._v("172.16.0.0 ~ 172.31.255.255")]),_._v("（支持百万数量级设备）")]),_._v(" "),v("li",[_._v("[ ] "),v("code",[_._v("192.168.0.0~192.168.255.255")]),_._v("（支持万数量级设备）")])]),_._v(" "),v("p",[_._v("内部多个设备使用同一个外网IP请求外网的服务，外部怎么知道具体是哪一个设备在请求的？")]),_._v(" "),v("h4",{attrs:{id:"_1-4-1-网络地址转换nat-network-address-translation"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-网络地址转换nat-network-address-translation"}},[_._v("#")]),_._v(" 1.4.1. 网络地址转换NAT（"),v("code",[_._v("Network Address Translation")]),_._v("）")]),_._v(" "),v("ul",[v("li",[_._v("[ ] NAT技术用于"),v("strong",[_._v("多个主机")]),_._v("通过"),v("strong",[_._v("一个公有IP访问互联网的私有网络中")])]),_._v(" "),v("li",[_._v("[ ] 减缓了IP地址的消耗，但增加了网络通信的复杂度")])]),_._v(" "),v("p",[_._v("过程：")]),_._v(" "),v("ul",[v("li",[_._v("[ ] 发生在本地路由器，把"),v("strong",[_._v("本地端口号")]),_._v("换成对外端口号进行通信，收到数据的时候把外网端口换成内网端口，关键是"),v("strong",[_._v("内网中每个端口不同")])])]),_._v(" "),v("p",[v("code",[_._v("NA(P)T")]),_._v("表\n"),v("img",{attrs:{src:"/imgs/ip_address_NAT.png",alt:"NA(P)T表"}})])])}),[],!1,null,null,null);v.default=i.exports}}]);