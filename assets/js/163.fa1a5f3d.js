(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{765:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("ul",[s("li",[s("a",{attrs:{href:"#1-react%E5%9F%BA%E7%A1%80"}},[t._v("1. React基础")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#11-jsx%E6%9C%AC%E8%B4%A8"}},[t._v("1.1. JSX本质")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#12-jsx-%E5%92%8C-vdom-%E7%9A%84%E5%85%B3%E7%B3%BB"}},[t._v("1.2. JSX 和 vdom 的关系?")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#13-setstate-%E4%B8%BA%E4%BD%95%E9%9C%80%E8%A6%81%E5%BC%82%E6%AD%A5"}},[t._v("1.3. setState 为何需要异步？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#14-setstate%E8%BF%87%E7%A8%8B"}},[t._v("1.4. setState过程")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#15-vue-%E5%92%8C-react%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%8C%BA%E5%88%AB"}},[t._v("1.5. Vue 和 React的本质区别")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#151-%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%8C%BA%E5%88%AB"}},[t._v("1.5.1. 模板的区别")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#152-%E7%BB%84%E4%BB%B6%E5%8C%96%E7%9A%84%E5%8C%BA%E5%88%AB"}},[t._v("1.5.2. 组件化的区别")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#1521-vue%E5%92%8Creact%E5%85%B1%E5%90%8C%E7%82%B9"}},[t._v("1.5.2.1. Vue和React共同点")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#16-react%E5%8E%9F%E7%90%86"}},[t._v("1.6. React原理")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#17-%E6%9E%84%E5%BB%BAdom%E8%BF%87%E7%A8%8B"}},[t._v("1.7. 构建DOM过程：")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#18-%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6%E5%92%8C%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6"}},[t._v("1.8. 有状态组件和无状态组件")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#19-%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%BD%BF%E7%94%A8%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%BD%BF%E7%94%A8%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6"}},[t._v("1.9. 什么情况下使用有状态组件？什么情况下使用有状态组件？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#110-%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84props%E5%92%8Cstatedata%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB"}},[t._v("1.10. 组件中的props和state/data之间的区别")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#111-react%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"}},[t._v("1.11. React使用变量")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#112-%E8%A7%A3%E5%86%B3%E5%8D%B8%E8%BD%BD%E5%90%8E%E8%BF%98%E6%9B%B4%E6%96%B0"}},[t._v("1.12. 解决卸载后还更新")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#113-%E8%A7%A6%E5%8F%91render%E7%9A%84%E6%9D%A1%E4%BB%B6%E6%9C%89%E5%93%AA%E4%BA%9B"}},[t._v("1.13. 触发render的条件有哪些？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#114-react%E7%9A%84%E5%9D%91"}},[t._v("1.14. React的坑")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#115-react%E7%9A%84purecomponent-vs-component"}},[t._v("1.15. React的"),s("code",[t._v("PureComponent")]),t._v(" VS "),s("code",[t._v("Component")])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#116-react-%E4%B8%AD-key-%E7%9A%84%E4%BD%9C%E7%94%A8"}},[t._v("1.16. React 中 key 的作用")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#117-setstate-%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0"}},[t._v("1.17. setState 什么时候批量更新？")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#118-react-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"}},[t._v("1.18. React 父子组件的生命周期")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#119-%E6%9B%B4%E6%96%B0%E7%BB%84%E4%BB%B6%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"}},[t._v("1.19. 更新组件的两种方式")])])])])]),t._v(" "),s("h2",{attrs:{id:"_1-react基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-react基础"}},[t._v("#")]),t._v(" 1. React基础")]),t._v(" "),s("h3",{attrs:{id:"_1-1-jsx本质"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-jsx本质"}},[t._v("#")]),t._v(" 1.1. JSX本质")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("语法糖，需要被解析成JS才能运行")])]),t._v(" "),s("li",[s("p",[t._v("Vue中模板也需要被解析成JS才能运行(开发环境解析)；")])]),t._v(" "),s("li",[s("p",[t._v("解析的形式是"),s("code",[t._v("React.createElement")]),t._v(",也可以是"),s("code",[t._v("h")]),t._v("函数")])]),t._v(" "),s("li",[s("p",[t._v("JSX是一个独立的标准")])]),t._v(" "),s("li",[s("p",[t._v("JSX降低了学习成本和编码工作量，代码简洁，但会可能增加debug成本")])]),t._v(" "),s("li",[s("p",[t._v("JSX（比如render函数中的div）=>"),s("code",[t._v("createElement")]),t._v("=>JS对象（虚拟DOM）=>真实DOM")])]),t._v(" "),s("li",[s("p",[t._v("没有JSX语法，通过"),s("code",[t._v("React.createElement")]),t._v("完全可以实现JSX功能，不过JSX使代码简洁")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("return React.createElement(‘div’, {}, React.createElement(‘span’, {}, ’item’))\n")])])]),s("p",[t._v("等于")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("return (\n  <div>\n    <span>item</span>\n  </div>\n)\n")])])]),s("h3",{attrs:{id:"_1-2-jsx-和-vdom-的关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-jsx-和-vdom-的关系"}},[t._v("#")]),t._v(" 1.2. JSX 和 vdom 的关系?")]),t._v(" "),s("ul",[s("li",[t._v("JSX需要渲染成"),s("code",[t._v("html")]),t._v("，数据驱动视图")]),t._v(" "),s("li",[s("code",[t._v("React.createElement")]),t._v(" 和"),s("code",[t._v("h")]),t._v("，都生成"),s("code",[t._v("vnode")])]),t._v(" "),s("li",[t._v("何时"),s("code",[t._v("patch")]),t._v("？初次渲染以及"),s("code",[t._v("setState")])]),t._v(" "),s("li",[t._v("自定义组件的解析？先初始化实例，然后执行"),s("code",[t._v("render")])])]),t._v(" "),s("h3",{attrs:{id:"_1-3-setstate-为何需要异步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-setstate-为何需要异步"}},[t._v("#")]),t._v(" 1.3. setState 为何需要异步？")]),t._v(" "),s("p",[t._v("可能会一次执行多个"),s("code",[t._v("setState")]),t._v("，没必要每次"),s("code",[t._v("setState")]),t._v("都重新渲染，提高性能，把多个"),s("code",[t._v("setState")]),t._v("合并。即使是每次重新渲染，用户也看不到中间的效果，只看到最后的结果。")]),t._v(" "),s("p",[t._v("Vue修改属性也是异步！")]),t._v(" "),s("h3",{attrs:{id:"_1-4-setstate过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-setstate过程"}},[t._v("#")]),t._v(" 1.4. setState过程")]),t._v(" "),s("ol",[s("li",[t._v("每个组件实例，都有"),s("code",[t._v("renderComponent")]),t._v("方法（继承自"),s("code",[t._v("component")]),t._v("）")]),t._v(" "),s("li",[t._v("执行"),s("code",[t._v("renderComponent")]),t._v("方法，会重新执行实例"),s("code",[t._v("render")]),t._v("方法")]),t._v(" "),s("li",[s("code",[t._v("render")]),t._v("函数返回的"),s("code",[t._v("newVnode")]),t._v("，然后拿到"),s("code",[t._v("preVnode")])]),t._v(" "),s("li",[t._v("执行"),s("code",[t._v("patch(preVnode, newVnode)")])])]),t._v(" "),s("h3",{attrs:{id:"_1-5-vue-和-react的本质区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-vue-和-react的本质区别"}},[t._v("#")]),t._v(" 1.5. Vue 和 React的本质区别")]),t._v(" "),s("ol",[s("li",[t._v("Vue本质是MVVM框架，由MVC发展而来")]),t._v(" "),s("li",[t._v("React本质是前端组件化框架，由后端组件化发展而来")])]),t._v(" "),s("h4",{attrs:{id:"_1-5-1-模板的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-模板的区别"}},[t._v("#")]),t._v(" 1.5.1. 模板的区别")]),t._v(" "),s("ol",[s("li",[t._v("Vue 使用模板（最初由angular提出，"),s("code",[t._v("v-if")]),t._v("，"),s("code",[t._v("v-model")]),t._v("等）")]),t._v(" "),s("li",[t._v("React 使用JSX，学习成本低")]),t._v(" "),s("li",[t._v("模板语法上，JSX更好")]),t._v(" "),s("li",[t._v("模板分离上，Vue更好")])]),t._v(" "),s("h4",{attrs:{id:"_1-5-2-组件化的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-组件化的区别"}},[t._v("#")]),t._v(" 1.5.2. 组件化的区别")]),t._v(" "),s("ul",[s("li",[t._v("React本身就是组件化，没有组件化就不是React")]),t._v(" "),s("li",[t._v("Vue也支持组件化，不过是在MVVM上的扩展")]),t._v(" "),s("li",[t._v("Vue组件化的文档很多（侧面反映其实它的组件化不好用，复杂度低才叫好用）。")]),t._v(" "),s("li",[t._v("对于组件化，我更倾向于React，做的彻底而清晰。")])]),t._v(" "),s("h4",{attrs:{id:"_1-5-2-1-vue和react共同点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-1-vue和react共同点"}},[t._v("#")]),t._v(" 1.5.2.1. Vue和React共同点")]),t._v(" "),s("ol",[s("li",[t._v("都支持组件化")]),t._v(" "),s("li",[t._v("数据驱动视图")])]),t._v(" "),s("h3",{attrs:{id:"_1-6-react原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-react原理"}},[t._v("#")]),t._v(" 1.6. React原理")]),t._v(" "),s("ul",[s("li",[t._v("最顶层是"),s("code",[t._v("ReactDOM.render()")]),t._v(", 一般是App，App包含的组件继承"),s("code",[t._v("React.component")]),t._v("。")]),t._v(" "),s("li",[t._v("jsx语法会被转译成是"),s("code",[t._v("React.createElement()")]),t._v(", 其需要传入三个参数，一是元素类型(如h1), 二是元素属性(如"),s("code",[t._v("className:’cc’")]),t._v(")，三是子元素(如一段字符串),，还可以嵌套。")]),t._v(" "),s("li",[t._v("本质上来讲，JSX 只是为 "),s("code",[t._v("React.createElement(component, props, ...children)")]),t._v(" 方法提供的语法糖。")])]),t._v(" "),s("h3",{attrs:{id:"_1-7-构建dom过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-构建dom过程"}},[t._v("#")]),t._v(" 1.7. 构建DOM过程：")]),t._v(" "),s("ul",[s("li",[t._v("JSX（比如render函数中的div）=>"),s("code",[t._v("createElement")]),t._v("=> JS对象（虚拟DOM）=> 真实DOM")])]),t._v(" "),s("h3",{attrs:{id:"_1-8-有状态组件和无状态组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-有状态组件和无状态组件"}},[t._v("#")]),t._v(" 1.8. 有状态组件和无状态组件")]),t._v(" "),s("ul",[s("li",[t._v("有状态组件：用class关键字创建出来的组件(用的最多)")]),t._v(" "),s("li",[t._v("无状态组件：用构造函数创建出来的组件（用的不多）")])]),t._v(" "),s("h3",{attrs:{id:"_1-9-什么情况下使用有状态组件-什么情况下使用有状态组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-什么情况下使用有状态组件-什么情况下使用有状态组件"}},[t._v("#")]),t._v(" 1.9. 什么情况下使用有状态组件？什么情况下使用有状态组件？")]),t._v(" "),s("ul",[s("li",[t._v("如果一个组件需要有自己的私有数据，则推荐使用：class创建的有状态组件；")]),t._v(" "),s("li",[t._v("如果一个组件不需要有自己的私有数据，则推荐使用：无状态组件；")])]),t._v(" "),s("p",[t._v("React官方说：无状态组件，由于没有自己的state和生命周期函数，所以运行效率高。")]),t._v(" "),s("p",[t._v("有状态组件和无状态组件之间的本质区别就是："),s("strong",[t._v("有无state属性")]),t._v("和"),s("strong",[t._v("生命周期函数")]),t._v("！")]),t._v(" "),s("h3",{attrs:{id:"_1-10-组件中的props和state-data之间的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-10-组件中的props和state-data之间的区别"}},[t._v("#")]),t._v(" 1.10. 组件中的props和state/data之间的区别")]),t._v(" "),s("ul",[s("li",[t._v("props中的数据都是外界传递过来的；")]),t._v(" "),s("li",[t._v("state/data中的数据，都是组件私有的；（通过ajax获取回来的数据，一般都是私有数据）；")]),t._v(" "),s("li",[t._v("props中的数据都是只读的；不能重新赋值；")]),t._v(" "),s("li",[t._v("state/data中的数据，都是可读可写的；")])]),t._v(" "),s("h3",{attrs:{id:"_1-11-react使用变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-11-react使用变量"}},[t._v("#")]),t._v(" 1.11. React使用变量")]),t._v(" "),s("ul",[s("li",[t._v("变量都用{}大括号包着")]),t._v(" "),s("li",[t._v("style={{}}两个括号，里面是一个对象")])]),t._v(" "),s("h3",{attrs:{id:"_1-12-解决卸载后还更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-12-解决卸载后还更新"}},[t._v("#")]),t._v(" 1.12. 解决卸载后还更新")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillUnmount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("setState")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-13-触发render的条件有哪些"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-13-触发render的条件有哪些"}},[t._v("#")]),t._v(" 1.13. 触发render的条件有哪些？")]),t._v(" "),s("ul",[s("li",[t._v("首次加载组件")]),t._v(" "),s("li",[t._v("使用了setState(更新了state)")]),t._v(" "),s("li",[t._v("props更新了(父级传给子级的值改变了)")])]),t._v(" "),s("h3",{attrs:{id:"_1-14-react的坑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-14-react的坑"}},[t._v("#")]),t._v(" 1.14. React的坑")]),t._v(" "),s("p",[t._v("1、尽量不要在 "),s("code",[t._v("componentWillReviceProps")]),t._v(" 里使用 "),s("code",[t._v("setState")]),t._v("，如果一定要使用，那么需要判断结束条件，不然会出现"),s("strong",[t._v("无限重渲染")]),t._v("，导致页面崩溃。(实际不是"),s("code",[t._v("componentWillReviceProps")]),t._v("会无限重渲染，而是"),s("code",[t._v("componentDidUpdate")]),t._v(")")]),t._v(" "),s("p",[t._v("2、JSX做表达式判断时候，需要"),s("strong",[t._v("强转")]),t._v("为"),s("code",[t._v("boolean")]),t._v("类型，如:")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("这是一段文本")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"_1-15-react的purecomponent-vs-component"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-15-react的purecomponent-vs-component"}},[t._v("#")]),t._v(" 1.15. React的"),s("code",[t._v("PureComponent")]),t._v(" VS "),s("code",[t._v("Component")])]),t._v(" "),s("p",[t._v("它们几乎完全相同，但是"),s("code",[t._v("PureComponent")]),t._v("通过"),s("code",[t._v("prop")]),t._v("和"),s("code",[t._v("state")]),t._v("的"),s("strong",[t._v("浅比较")]),t._v("来实现"),s("code",[t._v("shouldComponentUpdate")]),t._v("，某些情况下可以用"),s("code",[t._v("PureComponent")]),t._v("提升性能\n所谓浅比较("),s("code",[t._v("shallowEqual")]),t._v(")，即react源码中的一个函数，然后根据下面的方法进行是不是"),s("code",[t._v("PureComponent")]),t._v("的判断，帮我们做了本来应该我们在shouldComponentUpdate中做的事情")]),t._v(" "),s("p",[t._v("浅比较就是比较一个旧的props和新props的或者旧的state和新的state的长度是否一致，key值是否相同，以及它们对应的引用是否发生改变。仅仅做了一层的比较。所以这才叫做浅比较。")]),t._v(" "),s("h3",{attrs:{id:"_1-16-react-中-key-的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-16-react-中-key-的作用"}},[t._v("#")]),t._v(" 1.16. React 中 key 的作用")]),t._v(" "),s("p",[t._v("key 是 React 中用于追踪哪些列表中元素被修改、删除或者被添加的辅助标识。在 diff 算法中，key 用来"),s("strong",[t._v("判断该元素节点是被移动过来的还是新创建的元素，减少不必要的元素重复渲染")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"_1-17-setstate-什么时候批量更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-17-setstate-什么时候批量更新"}},[t._v("#")]),t._v(" 1.17. setState 什么时候批量更新？")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1. setState 会不会立刻更新 state 取决于调用 setState 时是不是已经处于批量更新事务中。\n\n2. 组件的生命周期函数和绑定的事件回调函数(比如onChange、onClick、onTouchMove等)都是在批量更新事务中执行的。\n\n3. 而通过 JavaScript 原生 addEventListener 直接添加的事件处理函数，以及使\n   用 setTimeout/setInterval 等setState会以同步的方式执行。\n")])])]),s("p",[t._v("下面是一个例子：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Example")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第 1 次 log->0")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第 2 次 log->0")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第 3 次 log->2")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第 4 次 log->3")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("参考资料："),s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/57748690",target:"_blank",rel:"noopener noreferrer"}},[t._v("setState, 知乎"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_1-18-react-父子组件的生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-18-react-父子组件的生命周期"}},[t._v("#")]),t._v(" 1.18. React 父子组件的生命周期")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Parent constructor\nParent componentWillMount\nParent render\nChild constructor\nChild componentWillMount\nChild render\nChild componentDidMount\nParent componentDidMount\n")])])]),s("p",[t._v("结论：")]),t._v(" "),s("ul",[s("li",[t._v("当需要"),s("code",[t._v("render")]),t._v("子组件的时候，才会进入子组件的生命周期，子组件的周期结束后，再回到上级的周期。")]),t._v(" "),s("li",[t._v("子组件的"),s("code",[t._v("componentDidMout")]),t._v("在父组件的"),s("code",[t._v("componentDidMout")]),t._v("之前")])]),t._v(" "),s("h3",{attrs:{id:"_1-19-更新组件的两种方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-19-更新组件的两种方式"}},[t._v("#")]),t._v(" 1.19. 更新组件的两种方式")]),t._v(" "),s("ol",[s("li",[t._v("主动更新：组件通过"),s("code",[t._v("setState")]),t._v("修改自己的状态")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Child shouldComponentUpdate\nChild componentWillUpdate\nChild render\nChild componentDidUpdate\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("被动更新，父组件通过"),s("code",[t._v("props")]),t._v("把自己的"),s("code",[t._v("state")]),t._v("传递给子组件，父组件执行"),s("code",[t._v("setState")]),t._v("更新状态")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Parent shouldComponentUpdate\nParent componentWillUpdate\nParent render\nChild componentWillReceiveProps(nextProps)\nChild shouldComponentUpdate\nChild componentWillUpdate\nChild render\nChild componentDidUpdate\nParent componentDidUpdate\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);