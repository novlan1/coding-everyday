(window.webpackJsonp=window.webpackJsonp||[]).push([[389],{660:function(_,v,e){"use strict";e.r(v);var o=e(14),t=Object(o.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("p",[_._v("H5（Vue3）")]),_._v(" "),v("ol",[v("li",[_._v("uni-app 内部也是用的 "),v("code",[_._v("vue-router")]),_._v("，能找到 "),v("code",[_._v("createRouter")]),_._v(" API的调用")]),_._v(" "),v("li",[v("code",[_._v("createRouter")]),_._v(" 中 "),v("code",[_._v("routes")]),_._v(" 参数使用的是 "),v("code",[_._v("__uniRoutes")]),_._v("，这是 uni-app 内部变量，有 "),v("code",[_._v("path/alias/meta/loader/component")]),_._v(" 几个属性。直接在控制台打印 "),v("code",[_._v("window.__uniRoutes")]),_._v(" 就能看到")]),_._v(" "),v("li",[v("code",[_._v("createRouter")]),_._v(" 源码路径："),v("code",[_._v("packages/uni-h5-vite/src/plugins/pagesJson.ts")]),_._v("，或搜索 "),v("code",[_._v("generatePagesRoute")])]),_._v(" "),v("li",[v("code",[_._v("__uniRoutes")]),_._v(" 都没有 "),v("code",[_._v("name")]),_._v(" 属性，自然无法通过 "),v("code",[_._v("name")]),_._v(" 跳转，即 "),v("code",[_._v("$router.push({ name: 'xxx' })")]),_._v(" 不可行，只能通过 "),v("code",[_._v("path")]),_._v(" 跳转")])]),_._v(" "),v("p",[_._v("H5（Vue2）")]),_._v(" "),v("ol",[v("li",[_._v("Vue2 中 "),v("code",[_._v("__uniRoutes")]),_._v(" 的生成逻辑源码在："),v("code",[_._v("packages/webpack-uni-pages-loader/lib/platforms/h5.js")]),_._v("，或搜索 "),v("code",[_._v("genPageRoutes")])]),_._v(" "),v("li")]),_._v(" "),v("p",[_._v("非 H5")]),_._v(" "),v("ol",[v("li",[_._v("uni-app 在非H5端没有提供 "),v("code",[_._v("$router")]),_._v("，推荐直接使用 "),v("code",[_._v("uni.navigateTo")]),_._v(" 等原生语法")])]),_._v(" "),v("p",[_._v("路由有3种形式")]),_._v(" "),v("ol",[v("li",[_._v("动态路由，比如 "),v("code",[_._v("/match/match-detail/52973147")])]),_._v(" "),v("li",[v("code",[_._v("aliasPath + query")]),_._v("，"),v("code",[_._v("aliasPath")]),_._v(" 就是路径别名，比如 "),v("code",[_._v("/match-list?siteId=2066002")])]),_._v(" "),v("li",[v("code",[_._v("fullPath + query")]),_._v("，"),v("code",[_._v("fullPath")]),_._v(" 就是全部路径，"),v("code",[_._v("views/match-list/match-list?siteId=2066002")])])]),_._v(" "),v("p",[_._v("非 uni-app 项目我更倾向于用1，参数精炼。uni-app 项目我更倾向于用3，好处有：")]),_._v(" "),v("ol",[v("li",[_._v("多端统一，无需额外兼容、转化")]),_._v(" "),v("li",[_._v("所见即所得，无心智负担")])]),_._v(" "),v("p",[_._v("路由有两种模式，"),v("code",[_._v("hash")]),_._v(" 和 "),v("code",[_._v("history")]),_._v("，结合上面提到的3种形式，总共有 "),v("code",[_._v("2 * 3 = 6")]),_._v(" 种类型。")]),_._v(" "),v("p",[_._v("非跨端转跨端，以及 vue2 升级 vue3，都会遇到映射路由表的问题。当前实现了：")]),_._v(" "),v("ol",[v("li",[_._v("hash + dynamic => history + aliasPath query")]),_._v(" "),v("li",[_._v("history + aliasPath query => history + fullPath query")])]),_._v(" "),v("p",[_._v("是 "),v("code",[_._v("uni-simple-router")]),_._v(" 支持的动态路由，"),v("code",[_._v("uni-app")]),_._v("框架本身不支持，具体是在初始化的时候，在 "),v("code",[_._v("routes")]),_._v(" 中定义了 "),v("code",[_._v("aliasPath")]),_._v("。")]),_._v(" "),v("p",[_._v("uni-app 使用 "),v("code",[_._v("vue-router")]),_._v(" 时，传入的还是 "),v("code",[_._v("path")]),_._v("，即页面路径，这种无法支持动态路由。这一点可以通过打印 "),v("code",[_._v("window.__uniRoutes")]),_._v(" 看出。引入 "),v("code",[_._v("uni-simple-router")]),_._v(" 后，再打印 "),v("code",[_._v("window.__uniRoutes")]),_._v("，会发现 "),v("code",[_._v("path")]),_._v(" 变成了 动态路由，比如 "),v("code",[_._v("/match/match-detail/:childid")]),_._v("，这是 "),v("code",[_._v("uni-simple-router")]),_._v(" 中 "),v("code",[_._v("src/H5/buildRouter.ts")]),_._v(" 做的，将 "),v("code",[_._v("aliasPath")]),_._v(" 赋值给了 "),v("code",[_._v("path")]),_._v("。")])])}),[],!1,null,null,null);v.default=t.exports}}]);