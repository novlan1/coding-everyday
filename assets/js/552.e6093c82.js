(window.webpackJsonp=window.webpackJsonp||[]).push([[552],{824:function(a,s,t){"use strict";t.r(s);var n=t(14),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#_1-开始"}},[a._v("1. 开始")])]),s("li",[s("a",{attrs:{href:"#_2-整体流程"}},[a._v("2. 整体流程")])]),s("li",[s("a",{attrs:{href:"#_3-遇到的问题"}},[a._v("3. 遇到的问题")]),s("ul",[s("li",[s("a",{attrs:{href:"#_3-1-macos-配置adb"}},[a._v("3.1. MacOS 配置adb")])]),s("li",[s("a",{attrs:{href:"#_3-2-ios-打包"}},[a._v("3.2. iOS 打包")])]),s("li",[s("a",{attrs:{href:"#_3-3-vscode支持-nvue-文件高亮显示"}},[a._v("3.3. VScode支持 nvue 文件高亮显示")])]),s("li",[s("a",{attrs:{href:"#_3-4-sass-报错-可选参数需在必需参数之后"}},[a._v("3.4. sass 报错，可选参数需在必需参数之后")])]),s("li",[s("a",{attrs:{href:"#_3-5-ts配置"}},[a._v("3.5. TS配置")])]),s("li",[s("a",{attrs:{href:"#_3-6-偶现错误"}},[a._v("3.6. 偶现错误")])]),s("li",[s("a",{attrs:{href:"#_3-7-组件上的方法"}},[a._v("3.7. 组件上的方法")])]),s("li",[s("a",{attrs:{href:"#_3-8-链接协议"}},[a._v("3.8. 链接协议")])]),s("li",[s("a",{attrs:{href:"#_3-9-key"}},[a._v("3.9. key")])]),s("li",[s("a",{attrs:{href:"#_3-10-onpagescroll"}},[a._v("3.10. onPageScroll")])])])]),s("li",[s("a",{attrs:{href:"#_4-体验"}},[a._v("4. 体验")])]),s("li",[s("a",{attrs:{href:"#_5-原理"}},[a._v("5. 原理")])])])]),s("p"),a._v(" "),s("h2",{attrs:{id:"_1-开始"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-开始"}},[a._v("#")]),a._v(" 1. 开始")]),a._v(" "),s("p",[a._v("Press UI 已经支持了普通 Vue 项目和 Vue3 等，现在需要支持下 App，即 "),s("code",[a._v("iOS")]),a._v(" 和 "),s("code",[a._v("Android")]),a._v(" 平台。")]),a._v(" "),s("p",[a._v("本质上还是一些语法的兼容，这里采用的方法依然是 Press UI 当 "),s("code",[a._v("Submodule")]),a._v("，然后做一些工具和语法的适配。这里主要记录下遇到的问题。")]),a._v(" "),s("h2",{attrs:{id:"_2-整体流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-整体流程"}},[a._v("#")]),a._v(" 2. 整体流程")]),a._v(" "),s("p",[a._v("先利用 "),s("code",[a._v("@vue/cli")]),a._v(" 创建工程，文档"),s("a",{attrs:{href:"https://uniapp.dcloud.net.cn/quickstart-cli.html#%E5%88%9B%E5%BB%BAuni-app",target:"_blank",rel:"noopener noreferrer"}},[a._v("在这里"),s("OutboundLink")],1),a._v("。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("vue create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" dcloudio/uni-preset-vue my-project\n")])])]),s("p",[a._v("注意不要用 HBuilderX 建，后期迁移很麻烦。")]),a._v(" "),s("p",[a._v("建完工程后，在 HBuilderX 中运行，选择运行 => 运行到手机或模拟器。为什么这里要用 HBuilderX 呢，因为 VScode 调试 App 会麻烦很多，HBuilderX 已经打通了 App 编译、打包的一些步骤。")]),a._v(" "),s("h2",{attrs:{id:"_3-遇到的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-遇到的问题"}},[a._v("#")]),a._v(" 3. 遇到的问题")]),a._v(" "),s("h3",{attrs:{id:"_3-1-macos-配置adb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-macos-配置adb"}},[a._v("#")]),a._v(" 3.1. MacOS 配置adb")]),a._v(" "),s("p",[a._v("工欲善其事，必先利其器。兼容 App 需要先下载 Xcode 和配置 "),s("code",[a._v("adb")]),a._v(" 等。")]),a._v(" "),s("p",[a._v("先下载 Android Studio，然后配置环境变量。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" ~/.bash_profile\n")])])]),s("p",[a._v("然后输入下面内容，"),s("code",[a._v("ANDROID_HOME")]),a._v(" 即为 SDK 位置。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Android Sdk")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ANDROID_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/Users/yang/Library/Android/sdk\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v("}")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${ANDROID_HOME}")]),a._v("/tools\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v("}")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${ANDROID_HOME}")]),a._v("/platform-tools\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v("}")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${ANDROID_HOME}")]),a._v("/tools/bin\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v("}")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${ANDROID_HOME}")]),a._v("/emulator\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ANDROID_SDK")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${ANDROID_HOME}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ANDROID_NDK")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${ANDROID_HOME}")]),a._v("/ndk-bundle\n")])])]),s("p",[a._v("终端输入 "),s("code",[a._v("source ~/.bash_profile")]),a._v("，使环境变量生效。")]),a._v(" "),s("p",[a._v("然后输入 "),s("code",[a._v("adb devices")]),a._v(" 或 "),s("code",[a._v("adb version")]),a._v("，可以检查是否配置成功。")]),a._v(" "),s("p",[a._v("另外，在手机上开启USB调试，才能在 "),s("code",[a._v("adb devices")]),a._v(" 中看到设备。")]),a._v(" "),s("p",[a._v("参考：")]),a._v(" "),s("ul",[s("li",[a._v("https://blog.csdn.net/xiaoyue_/article/details/132020304")]),a._v(" "),s("li",[a._v("https://www.jianshu.com/p/744fc5946627")])]),a._v(" "),s("h3",{attrs:{id:"_3-2-ios-打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-ios-打包"}},[a._v("#")]),a._v(" 3.2. iOS 打包")]),a._v(" "),s("p",[a._v("iOS 打包需要证书，包括证书密码、证书profile文件、密钥证书。")]),a._v(" "),s("p",[a._v("打包后会生成 ipa 文件。可以将这个文件上传到 devcloud，然后用“归档构件“插件，生成二维码。")]),a._v(" "),s("p",[a._v("上传命令示例：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ex")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 文件路径")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FILE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/Users/yang/Downloads/press-ui.ipa\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 目标")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("TARGET_PATH")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/data/workspace/p-30ff30b405b24a228b4fa22cb05b7db3/src\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("36000")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$FILE")]),a._v(" root@my:"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TARGET_PATH")]),a._v("\n")])])]),s("h3",{attrs:{id:"_3-3-vscode支持-nvue-文件高亮显示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-vscode支持-nvue-文件高亮显示"}},[a._v("#")]),a._v(" 3.3. VScode支持 nvue 文件高亮显示")]),a._v(" "),s("p",[a._v("只需要将 "),s("code",[a._v("nvue")]),a._v(" 文件当成 "),s("code",[a._v("vue")]),a._v(" 文件处理即可。")]),a._v(" "),s("p",[a._v("设置中搜文件，找到"),s("code",[a._v("Associations")]),a._v("，"),s("code",[a._v("key")]),a._v(" 填 "),s("code",[a._v("*.nvue")]),a._v("， "),s("code",[a._v("value")]),a._v(" 填 "),s("code",[a._v("vue")]),a._v("。")]),a._v(" "),s("p",[a._v("并去掉 "),s("code",[a._v("Vetur")]),a._v(" 对 "),s("code",[a._v("Script/Style/Template")]),a._v(" 的校验。")]),a._v(" "),s("p",[a._v("参考：https://blog.51cto.com/gblfy/5652539")]),a._v(" "),s("h3",{attrs:{id:"_3-4-sass-报错-可选参数需在必需参数之后"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-sass-报错-可选参数需在必需参数之后"}},[a._v("#")]),a._v(" 3.4. sass 报错，可选参数需在必需参数之后")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("assError: required parameters must precede optional parameters\n        on line "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("229")]),a._v(" of "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/Users/yang/Documents/git-woa/press-ui-app/press-ui-app/packages/base/mixin.scss\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" @mixin halfBorder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$color")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$color")]),a._v("-gray-3, "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$borderRadius")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n")])])]),s("div",{staticClass:"language-scss extra-class"},[s("pre",{pre:!0,attrs:{class:"language-scss"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("@mixin")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("halfBorder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token property"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$color")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$color-gray-3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$borderRadius")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 可简单改为：")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("@mixin")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("halfBorder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token property"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$color")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$color-gray-3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$borderRadius")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 1px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h3",{attrs:{id:"_3-5-ts配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-ts配置"}},[a._v("#")]),a._v(" 3.5. TS配置")]),a._v(" "),s("p",[a._v("HBuilderX 可以有自己的"),s("code",[a._v("tsconfig.json")]),a._v("，需注意不能配置为 "),s("code",[a._v("noEmit: true")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Error: TypeScript emitted no output "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v("\n")])])]),s("h3",{attrs:{id:"_3-6-偶现错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-偶现错误"}},[a._v("#")]),a._v(" 3.6. 偶现错误")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("reportJSException "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" exception function:createInstanceContext, exception:JavaScript execute error"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("Uncaught ReferenceError: uni is not defined\n at ./node_modules/.pnpm/@dcloudio+vue-cli-plugin-uni@2.0.2-3081220230817001/node_modules/@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("pages/tabBar/component/component.js.nvue:13855:21"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n at __webpack_require__ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("pages/tabBar/component/component.js.nvue:21443:41"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("p",[a._v("这个应该是 HBuilderX 自己的问题，一个解决办法是，在 VScode 中执行 "),s("code",[a._v("npm run dev:h5")]),a._v("，然后 HBuilderX 会自动重新编译，这时候报错会消除。")]),a._v(" "),s("h3",{attrs:{id:"_3-7-组件上的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-组件上的方法"}},[a._v("#")]),a._v(" 3.7. 组件上的方法")]),a._v(" "),s("p",[a._v("函数式调用组件时，需要在组件外获取组件内方法，之前采用方法是判断环境是否为 H5，其和小程序的策略不同：")]),a._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// #ifdef H5")]),a._v("\ndialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("newOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\npromise "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("showDialog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// #endif")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// #ifndef H5")]),a._v("\ndialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("$vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("newOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\npromise "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("$vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("showDialog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// #endif")]),a._v("\n")])])]),s("p",[a._v("在 App 端，其和 H5 表现一致，也就是 "),s("code",[a._v("setData")]),a._v(" 在 "),s("code",[a._v("dialog")]),a._v(" 上，不在 "),s("code",[a._v("dialog.$vm")]),a._v(" 上。这里改造如下：")]),a._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" func "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'setData'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" setData "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("$vm"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?.")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("typeof")]),a._v(" setData "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("===")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("setData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n")])])]),s("p",[a._v("需要优先使用 "),s("code",[a._v("dialog.$vm")]),a._v(" 的方法")]),a._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" setData "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" dialog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("$vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("func"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"_3-8-链接协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-链接协议"}},[a._v("#")]),a._v(" 3.8. 链接协议")]),a._v(" "),s("p",[a._v("App 端不支持省略 "),s("code",[a._v("http")]),a._v(" 协议，也就是不能：")]),a._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    icon"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      normal"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'//mike-1255355338.cos.ap-guangzhou.myqcloud.com/press%2Fimg%2Fuser-inactive.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      active"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'//mike-1255355338.cos.ap-guangzhou.myqcloud.com/press%2Fimg%2Fuser-active.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("链接补充上 "),s("code",[a._v("https:")]),a._v(" 即可。")]),a._v(" "),s("h3",{attrs:{id:"_3-9-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-9-key"}},[a._v("#")]),a._v(" 3.9. key")]),a._v(" "),s("p",[a._v("遇到下面的报错，调试了很久，网上查到的资料要么是动态引用、要么是变量为空未兼容，但是 Press UI 并不存在这些情况。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Not found -1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("-1,1,0,2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("-1,1,0,2,2,3-1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("undefined at view.umd.min.js:1\n")])])]),s("p",[a._v("最后，发现是下面语法的问题：")]),a._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("div")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("v-for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("(item, index) of list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v(":key")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("item.index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("p",[a._v("改成 "),s("code",[a._v(':key="index"')]),a._v(" 即可解决。")]),a._v(" "),s("p",[a._v("这个问题的坑点在于，报错信息极其隐晦，很难定位真正有问题的地方。")]),a._v(" "),s("h3",{attrs:{id:"_3-10-onpagescroll"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-onpagescroll"}},[a._v("#")]),a._v(" 3.10. onPageScroll")]),a._v(" "),s("p",[a._v("Press UI 中还在使用 page 的滚动的组件只有 press-sticky 了，在 APP 端 onPageScroll 目前并未生效。")]),a._v(" "),s("h2",{attrs:{id:"_4-体验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-体验"}},[a._v("#")]),a._v(" 4. 体验")]),a._v(" "),s("p",[a._v("目前 Press UI 组件已兼容 App，可扫码下面二维码下载安装，体验安卓版本。")]),a._v(" "),s("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/press/apk/press-ui-apk-main.png",width:"200px"}}),a._v(" "),s("p",[a._v("iOS 证书制作要花钱，等有钱了再说～")]),a._v(" "),s("p",[a._v("目前 Press UI 支持的产品矩阵如下：")]),a._v(" "),s("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/10/own_mike_13f3281f0a188e0fbd.png",width:"600"}}),a._v(" "),s("h2",{attrs:{id:"_5-原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-原理"}},[a._v("#")]),a._v(" 5. 原理")]),a._v(" "),s("p",[a._v("从上面解决的问题可以看到，Press UI 兼容 App 所做的的适配相对比较少，其实是 uni-app 底层已经适配好了。")]),a._v(" "),s("blockquote",[s("p",[a._v("在 App 端，如果使用 vue 页面，则使用 webview 渲染；如果使用 nvue 页面(native vue 的缩写)，则使用原生渲染。")])]),a._v(" "),s("p",[s("code",[a._v("nvue")]),a._v(" 的 "),s("code",[a._v("css")]),a._v(" 写法受限，Press UI 的组件均为 "),s("code",[a._v("vue")]),a._v(" 类型。")])])}),[],!1,null,null,null);s.default=e.exports}}]);