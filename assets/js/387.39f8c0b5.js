(window.webpackJsonp=window.webpackJsonp||[]).push([[387],{658:function(a,e,t){"use strict";t.r(e);var _=t(14),l=Object(_.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"_1-背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-背景"}},[a._v("#")]),a._v(" 1. 背景")]),a._v(" "),e("p",[a._v("h5项目要转为uni-app项目可以参考这篇"),e("a",{attrs:{href:"https://ask.dcloud.net.cn/article/36174",target:"_blank",rel:"noopener noreferrer"}},[a._v("文章"),e("OutboundLink")],1),a._v("，我们在实际处理过程中，开发了一系列工具，比如Eslint插件、nodejs脚本、Webpack loader、Webpack plugin等。这些工具特点不同，工作阶段不同，本篇文章旨在理清这些工具的差异和特点。")]),a._v(" "),e("h2",{attrs:{id:"_2-不同工具的作用阶段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-不同工具的作用阶段"}},[a._v("#")]),a._v(" 2. 不同工具的作用阶段")]),a._v(" "),e("p",[a._v("一个普通的h5项目，从开发到上线运行会经过这些阶段：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("源代码 => 编译 => 打包产物 => 浏览器运行\n")])])]),e("p",[a._v("h5项目转为uni-app项目会比上面多一步：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("h5源代码 => uni-app代码 => 编译 => 打包产物 => 浏览器运行\n")])])]),e("ul",[e("li",[a._v("Eslint插件，作用阶段为源代码开发阶段，包括h5源代码或者uni-app代码，主要是一些语法的转换")]),a._v(" "),e("li",[a._v("转换工具，本质是nodejs脚本，作用在h5源代码转为uni-app代码阶段，包括pages.json的生成、小程序main.js的生成等")]),a._v(" "),e("li",[a._v("Webpack-loader，作用在编译阶段，为uni-app代码编译成打包产物的阶段")]),a._v(" "),e("li",[a._v("Webpack-plugin，与上类似，但是功能更全面")]),a._v(" "),e("li",[a._v("运行时的代理，作用在运行时")])]),a._v(" "),e("h2",{attrs:{id:"_3-eslint插件和webpack-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-eslint插件和webpack-loader"}},[a._v("#")]),a._v(" 3. Eslint插件和Webpack loader")]),a._v(" "),e("p",[a._v("Eslint插件和Webpack loader内容有些重叠，有些功能既可以用Eslint插件实现，也可以用Webpack loader实现，这时候怎么区分呢？")]),a._v(" "),e("p",[a._v("假设对于一个问题或功能，有A、B两种实现方式，有下面几种情况：")]),a._v(" "),e("ol",[e("li",[a._v("小程序只支持A，H5都可以支持，并且A、B两种方式对产品性能等指标没有影响")]),a._v(" "),e("li",[a._v("小程序只支持A，H5都可以支持，但是在H5上，B比A性能更佳")]),a._v(" "),e("li",[a._v("小程序只支持A，H5只支持B")]),a._v(" "),e("li",[a._v("小程序都可以支持，H5只支持B（基本不存在）")]),a._v(" "),e("li",[a._v("小程序和H5都可以支持")])]),a._v(" "),e("p",[a._v("下面我们分析下各种情况。")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("第1种情况，应该用Eslint插件将B语法转为A。比如vue模板中"),e("code",[a._v(':childId="+childId"')]),a._v("和"),e("code",[a._v(':childId="parseInt(childId, 10)"')]),a._v("，这两种写法对性能几乎没影响。")])]),a._v(" "),e("li",[e("p",[a._v("第2种情况，不应该用Eslint插件，因为会损失h5上的性能。比如动态加载组件，h5上是需要的，并且有一定性能提升。")])]),a._v(" "),e("li",[e("p",[a._v("第3、4种情况，无法用Eslint插件，只能用Webpack loader或其他方式")])]),a._v(" "),e("li",[e("p",[a._v("第5种情况，不用处理")])])]),a._v(" "),e("h2",{attrs:{id:"_4-尽早执行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-尽早执行"}},[a._v("#")]),a._v(" 4. 尽早执行")]),a._v(" "),e("p",[a._v("对于跨平台项目，对代码的改造应该越早越好，也就是说能用Eslint插件解决的，尽量不用转换工具、Webpack loader，能用转换工具解决的，尽量不用Webpack loader。")]),a._v(" "),e("p",[a._v("因为越往后，改动成本越高，越容易出错。并且Webpack loader并不是透明的，多个loader会相互影响，很容易引起一些bug。")]),a._v(" "),e("h2",{attrs:{id:"_5-不同工具功能梳理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-不同工具功能梳理"}},[a._v("#")]),a._v(" 5. 不同工具功能梳理")]),a._v(" "),e("p",[a._v("这里占个位，后面有空再整理。")])])}),[],!1,null,null,null);e.default=l.exports}}]);