(window.webpackJsonp=window.webpackJsonp||[]).push([[496],{800:function(s,t,a){"use strict";a.r(t);var e=a(25),v=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"css-变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css-变量"}},[s._v("#")]),s._v(" CSS 变量")]),s._v(" "),t("p",[t("code",[s._v("pixui")]),s._v(" 不支持CSS变量，需要将 "),t("code",[s._v("var(--xxx, xxx)")]),s._v(" 这种都改掉。")]),s._v(" "),t("p",[s._v("怎么改呢，想到几个点：")]),s._v(" "),t("ol",[t("li",[s._v("用编译后的产物去替换。比如 "),t("code",[s._v("es/")]),s._v(" 目录下的css文件，替换原有文件")]),s._v(" "),t("li",[s._v("用 "),t("code",[s._v("less")]),s._v(" 变量替换之前的css变量")]),s._v(" "),t("li",[s._v("用 "),t("code",[s._v("scss")]),s._v(" 变量替换，好处是 "),t("code",[s._v("scss")]),s._v(" 中 "),t("code",[s._v("!default")]),s._v(" 默认变量，业务可以方便覆盖")])]),s._v(" "),t("p",[s._v("第1个方案不够彻底，仍需要处理CSS变量。第3个成本高，并且业务本身也是"),t("code",[s._v("less")]),s._v("，同时使用两种预处理器，并不统一。")]),s._v(" "),t("p",[s._v("目前采用的第2个方案，借助 "),t("code",[s._v("less")]),s._v(" 中的 "),t("code",[s._v("if")]),s._v(" 和 "),t("code",[s._v("isdefined")]),s._v(" 语法，将之前样式文件中的CSS变量批量替换成 "),t("code",[s._v("less")]),s._v(" 变量。")]),s._v(" "),t("p",[s._v("之前；")]),s._v(" "),t("div",{staticClass:"language-less extra-class"},[t("pre",{pre:!0,attrs:{class:"language-less"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@brand-color-1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("var")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("td"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("brand"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("color"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #f2f3ff"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("现在：")]),s._v(" "),t("div",{staticClass:"language-less extra-class"},[t("pre",{pre:!0,attrs:{class:"language-less"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@brand-color-1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("isdefined")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@td-brand-color-1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@td-brand-color-1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #f2f3ff"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("这里应该最小化组件库改动，之后 "),t("code",[s._v("tdesign-mobile-react")]),s._v(" 官方有更新的话，也可以方便合入。")]),s._v(" "),t("p",[s._v("当前采用的方案是脚本处理 "),t("code",[s._v("var.less")]),s._v(" 文件，生成了"),t("code",[s._v("pixui")]),s._v("支持的"),t("code",[s._v("less")]),s._v("变量。官方有变动的话，再次生成并覆盖。")]),s._v(" "),t("h3",{attrs:{id:"样式覆盖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#样式覆盖"}},[s._v("#")]),s._v(" 样式覆盖")]),s._v(" "),t("p",[s._v("解决完 CSS 变量，有一些组件在浏览器，和在 "),t("code",[s._v("pxide")]),s._v("、真机内仍不一致。原因 pi"),t("code",[s._v("x")]),s._v("ui 规则不一样：")]),s._v(" "),t("ol",[t("li",[s._v("div 默认flex布局，不是block")]),s._v(" "),t("li",[s._v("div 默认不会撑满父元素")])]),s._v(" "),t("p",[s._v("以上等等问题，需要写一些覆盖的样式。这里不能写到组件内，也是考虑到后面不方便合入官方更新。采用的方案是单独提供 "),t("code",[s._v("pixui")]),s._v(" 的 "),t("code",[s._v("ployfill.css")]),s._v("。")])])}),[],!1,null,null,null);t.default=v.exports}}]);