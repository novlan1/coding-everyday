
[toc]

## Ti18n

Ti8n相比于vue-i18n等工具，多了词条管理、部署CDN等功能，还有权限控制及一些部署选项，相当于一个后台管理系统，可以看作是其他工具的超集。

对于一个多人协作、大型项目而言，这种后台词条管理是很方便的。

另外，Ti18n是基于i18next的，一些插值、格式化、复数这些都是支持的。

多考虑一下，如果将来Ti8n废弃掉，也是可以很快换成其他方案，或者完全自己实现的，因为后台管理和前端国际化是分开的。本质上我们只需要一个cdn链接和一个`t`函数，Ti18n无非是在词条管理上方便了些。

## 插值

插值可以实现复杂点的需求，比如中文的`2022年3月`，对应英文的`2022/3`，可以设置为：

```js
{
  key: 'monthYear',
  zh-CN: '{year}年{month}月',
  en-US: '{year}/{month}'
}
```

其实，函数也可以实现类似的功能，甚至更强大，能实现更丰富的功能，vant组件库的国际化就包含有函数。但是函数不能json化，也不是i18n的主流方案，这里还是推荐用插值、格式化等统一方案。


## 图片

应该是建一个海外存储桶，或者额外的文件夹（不考虑延迟的话）。前端可以这样处理：

```vue
<template>
 <img :src="$imgT('')">
</template>
```

```ts
function $imgT(key) {
  if (!this.lang || this.lang === 'zh-CN') {
    return `https://x.${key}.png`
  }
  return `https://y.${key}.png`
}
```


## 后台接口

后台返回的文案、提示要做国际化，有多种方案：

1. 后端自闭环，反正部署在海外，应该是能区分当前需要的语言的，后台直接给前端返回相应的文字即可。如果后台获取不到当前语言，也可以由前端传递。这种缺点是前端和后台各自维护词条，可维护性低。优点是前端完全不参与。
2. 后端传递id给前端，前端匹配cdn的词条。举例如下：

之前内容：

```ts
{
  errMsg: '参数错误'
}
```

改造后：

```ts
{
  errMsg: {
    id: 10001,
  }
}
```

------

暂时先写这么多，后面遇到新问题再补充。