### minium、minitest

`minium`是小程序的自动化框架，后面带个`nium`，类似的还有`appnium`、`selenium`。

`minitest`是基于`minium`的自动化测试服务，支持云测。


### miniprogram-automator

`minium`和`miniprogram-automator`底层是同一套东西，前者语言是`python`，后者语言是`js/ts`，二者都不支持`headless`模式，无法在`linux`环境中运行。
另外，`miniprogram-automator`只能用开发者工具、真机，不能用云真机。

`minitest`包含云测服务，但是只能用`python`写用例。

#### 启动

可以在测试脚本中启动：

```ts
// 工具 cli 位置，如果你没有更改过默认安装位置
const CLI_PATH = '/Applications/wechatwebdevtools.app/Contents/MacOS/cli'; 
// 项目文件地址
const PROJECT_PATH = '/Users/mike/Documents/web/dist/build/mp-weixin'; 

async function init() {
  miniProgram = await automator.launch({
    cliPath: CLI_PATH,
    projectPath: PROJECT_PATH,
  });
}
```


也可以在命令行中启动后，脚本中连接：


```bash
# 进入微信开发者工具的安装目录
cd /Applications/wechatwebdevtools.app/Contents/MacOS
# 找到要执行自动化测试的目录
./cli --auto /Users/mike/Documents/web/dist/build/mp-weixin --auto-port 9420
```


```ts
async function init() {
  miniProgram = await automator.connect({
    wsEndpoint: 'ws://localhost:9420',
  });
}
```

