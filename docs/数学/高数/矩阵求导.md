- [1. 矩阵求导](#1-矩阵求导)
  - [1.1. 符号约定](#11-符号约定)
  - [1.2. 矩阵求导](#12-矩阵求导)
  - [1.3. 标量函数和向量函数](#13-标量函数和向量函数)
  - [1.4. 以分母布局为例的矩阵求导的基本原则](#14-以分母布局为例的矩阵求导的基本原则)
  - [1.7. 例1](#17-例1)
  - [1.8. 例2](#18-例2)
  - [1.9. 最小二乘估计推导](#19-最小二乘估计推导)
  - [1.10. 有用的公式](#110-有用的公式)
  - [1.11. 一些说明](#111-一些说明)

## 1. 矩阵求导

### 1.1. 符号约定

![img](http://img.uwayfly.com/article_mike_20200605155834_45a56f692536.png)

![img](http://img.uwayfly.com/article_mike_20200605155845_3bcfad7cc127.png)


### 1.2. 矩阵求导

**矩阵A对矩阵B求导的本质：矩阵A的每个元素分别对矩阵B中的每个元素进行求导**。

```
A1*1  B1*1: 1个导数
Am*1  B1*1:  m个导数
Am*1 Bp*1:  m*p个导数
Am*n  Bp*q:   m*n*p*q个导数
```

### 1.3. 标量函数和向量函数

- **标量函数：结果为标量的函数**
- **向量函数：结果为向量的函数**


![img](http://img.uwayfly.com/article_mike_20200606092513_b54e6859e514.png)



### 1.4. 以分母布局为例的矩阵求导的基本原则

- 原则1：**如果分子是标量函数，分母是列向量，那么求导结果要写成分母的形式，也就是列向**量。
- 原则2：**如果分子是列向量，分母是标量，那么求导结果要写成分子转置的形式，也就是行向量**。
- 拓展：**如果分子是列向量`m*1`，分母也是列向量`p*1`**，首先可以**根据原则1写成列向量的形式`p*1`**，然后**里面的每个元素可以根据原则2写成行向量的形式，最终结果是`p*m`**。


![img](http://img.uwayfly.com/article_mike_20200606092557_15b022f1ece6.png)


![img](http://img.uwayfly.com/article_mike_20200606092622_aa19a645279d.png)



![img](http://img.uwayfly.com/article_mike_20200606092635_86b01ce987cc.png)


### 1.7. 例1


![img](http://img.uwayfly.com/article_mike_20200606092702_47238d0fb2cf.png)

![img](http://img.uwayfly.com/article_mike_20200606092706_66b00d2b4cca.png)

**A和x是p*1的矩阵，A<sup>T</sup>x = x<sup>T</sup>A，它们对x求导结果都是A。**


### 1.8. 例2

![img](http://img.uwayfly.com/article_mike_20200606092938_2954b795182a.png)

所以，公式2：

![img](http://img.uwayfly.com/article_mike_20200606093005_2f99ccac20a3.png)

### 1.9. 最小二乘估计推导

![img](http://img.uwayfly.com/article_mike_20200606093104_5ff1a626c3d4.png)


### 1.10. 有用的公式


![img](http://img.uwayfly.com/article_mike_20200606093232_b1dfc76b0024.png)


### 1.11. 一些说明

1. 除了分母布局外，还有分子布局、混合布局。**分子布局和分母布局通常差一个转置，但不绝对**。
2. 布局没有优劣之分，适合自己的才是最好的，还要**注意保持计算的连贯性**。
3. **根据导数矩阵的维度来判断别人的布局**。